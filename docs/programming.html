<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN"
"http://www.w3.org/TR/html4/strict.dtd">
<title>
      NetLogo User Manual: Programming Guide
    </title>
    <link rel="stylesheet" href="netlogo.css" type="text/css">
    <meta http-equiv="Content-Type" content="text/html; charset=us-ascii">
  <h1>
      Programming Guide
    </h1>
    <div class="version">
      NetLogo User Manual&nbsp;&nbsp;&nbsp;
    </div>
    <p>
      This section describes the NetLogo programming language in detail.
    <p>
      The Code Example models mentioned throughout can be found in the Code
      Examples section of the Models Library.
    <ul>
      <li>
        <a href="#agents">Agents</a>
      <li>
        <a href="#procedures">Procedures</a>
      <li>
        <a href="#variables">Variables</a>
      <li>
        <a href="#ticks">Tick counter</a>
      <li>
        <a href="#colors">Colors</a>
      <li>
        <a href="#ask">Ask</a>
      <li>
        <a href="#agentsets">Agentsets</a>
      <li>
        <a href="#breeds">Breeds</a>
      <li>
        <a href="#buttons">Buttons</a>
      <li>
        <a href="#lists">Lists</a>
      <li>
        <a href="#math">Math</a>
      <li>
        <a href="#random">Random numbers</a>
      <li>
        <a href="#shapes">Turtle shapes</a>
      <li>
        <a href="#link-shapes">Link shapes</a>
      <li>
        <a href="#updates">View updates</a>
      <li>
        <a href="#plotting">Plotting</a>
      <li>
        <a href="#strings">Strings</a>
      <li>
        <a href="#output">Output</a>
      <li>
        <a href="#fileio">File I/O</a>
      <li>
        <a href="#movies">Movies</a>
      <li>
        <a href="#perspective">Perspective</a>
      <li>
        <a href="#drawing">Drawing</a>
      <li>
        <a href="#topology">Topology</a>
      <li>
        <a href="#links">Links</a>
      <li>
        <a href="#tasks">Tasks</a>
      <li>
        <a href="#ask-concurrent">Ask-Concurrent</a>
      <li>
        <a href="#tie">Tie</a>
      <li>
        <a href="#includes">Multiple source files</a>
      <li>
        <a href="#syntax">Syntax</a>
      </ul>
    <h2>
      <a name="agents" id="agents">Agents</a>
    </h2>
    <p>
      The NetLogo world is made up of <b>agents</b>. Agents are beings that
      can follow instructions.
    <p>
      In NetLogo, there are four types of agents: <b>turtles</b>,
      <b>patches</b>, <b>links</b>, and the <b>observer</b>.
    <p>
      Turtles are agents that move around in the <b>world</b>. The world is
      two dimensional and is divided up into a grid of patches. Each patch
      is a square piece of &quot;ground&quot; over which turtles can move.
      Links are agents that connect two turtles. The observer doesn't
      have a location -- you can imagine it as looking out over the world
      of turtles and patches.
    <p>
      The observer doesn't observe passively -- it gives instructions
      to the other agents.
    <p>
      When NetLogo starts up, there are no turtles. The observer can make
      new turtles. Patches can make new turtles too. (Patches can't
      move, but otherwise they're just as &quot;alive&quot; as
      turtles.)
    <p>
      Patches have coordinates. The patch at coordinates (0, 0) is called
      the origin and the coordinates of the other patches are the
      horizontal and vertical distances from this one. We call the
      patch's coordinates <a href=
      "dictionary.html#pxcor"><tt>pxcor</tt></a> and <a href=
      "dictionary.html#pycor"><tt>pycor</tt></a>. Just like in the standard
      mathematical coordinate plane, <a href=
      "dictionary.html#pxcor"><tt>pxcor</tt></a> increases as you move to
      the right and <a href="dictionary.html#pycor"><tt>pycor</tt></a>
      increases as you move up.
    <p>
      The total number of patches is determined by the settings <a href=
      "dictionary.html#min-pxcor"><tt>min-pxcor</tt></a>, <a href=
      "dictionary.html#max-pxcor"><tt>max-pxcor</tt></a>, <a href=
      "dictionary.html#min-pycor"><tt>min-pycor</tt></a>, and <a href=
      "dictionary.html#max-pycor"><tt>max-pycor</tt></a> When NetLogo
      starts up, <a href=
      "dictionary.html#min-pxcor"><tt>min-pxcor</tt></a>, <a href=
      "dictionary.html#max-pxcor"><tt>max-pxcor</tt></a>, <a href=
      "dictionary.html#min-pycor"><tt>min-pycor</tt></a>, and <a href=
      "dictionary.html#max-pycor"><tt>max-pycor</tt></a> are -16, 16, -16,
      and 16 respectively. This means that <a href=
      "dictionary.html#pxcor"><tt>pxcor</tt></a> and <a href=
      "dictionary.html#pycor"><tt>pycor</tt></a> both range from -16 to 16,
      so there are 33 times 33, or 1089 patches total. (You can change the
      number of patches with the Settings button.)
    <p>
      Turtles have coordinates too: <a href=
      "dictionary.html#xcor"><tt>xcor</tt></a> and <a href=
      "dictionary.html#ycor"><tt>ycor</tt></a>. A patch's coordinates
      are always integers, but a turtle's coordinates can have
      decimals. This means that a turtle can be positioned at any point
      within its patch; it doesn't have to be in the center of the
      patch.
    <p>
      Links do not have coordinates. Every link has two ends, and each end
      is a turtle. If either turtle dies, the link dies too. A link is
      represented visually as a line connecting the two turtles.
    <h2>
      <a name="procedures" id="procedures">Procedures</a>
    </h2>
    <p>
      In NetLogo, <b>commands</b> and <b>reporters</b> tell agents what to
      do. A command is an action for an agent to carry out, resulting in
      some effect. A reporter is instructions for computing a value, which
      the agent then &quot;reports&quot; to whoever asked it.
    <p>
      Typically, a command name begins with a verb, such as
      &quot;create&quot;, &quot;die&quot;, &quot;jump&quot;,
      &quot;inspect&quot;, or &quot;clear&quot;. Most reporter names are
      nouns or noun phrases.
    <p>
      Commands and reporters built into NetLogo are called
      <b>primitives</b>. <a href="dictionary.html">The NetLogo
      Dictionary</a> has a complete list of built-in commands and
      reporters.
    <p>
      Commands and reporters you define yourself are called
      <b>procedures</b>. Each procedure has a name, preceded by the keyword
      <a href="dictionary.html#to"><tt>to</tt></a> or <a href=
      "dictionary.html#to-report"><tt>to-report</tt></a>, depending on
      whether it is a command procedure or a reporter procedure. The
      keyword <a href="dictionary.html#end"><tt>end</tt></a> marks the end
      of the commands in the procedure. Once you define a procedure, you
      can use it elsewhere in your program.
    <p>
      Many commands and reporters take <b>inputs</b> -- values that the
      command or reporter uses in carrying out its actions or computing its
      result.
    <p>
      Here are two command procedures:
    <pre>
to setup
  clear-all
  create-turtles 10
  reset-ticks
end

to go
  ask turtles [
    fd 1            ;; forward 1 step
    rt random 10    ;; turn right
    lt random 10    ;; turn left
  ]
  tick
end
</pre>
    <p>
      Note the use of semicolons to add &quot;comments&quot; to the
      program. Comments can make your code easier to read and understand,
      but they don't affect its behavior.
    <p>
      In this program,
    <ul>
      <li>
        <tt>setup</tt> and <tt>go</tt> are user-defined commands.
      <li>
        <a href="dictionary.html#clear-all"><tt>clear-all</tt></a>,
        <a href="dictionary.html#create-turtles"><tt>create-turtles</tt></a>,
        <a href="dictionary.html#reset-ticks"><tt>reset-ticks</tt></a>,
        <a href="dictionary.html#ask"><tt>ask</tt></a>, <a href=
        "dictionary.html#left"><tt>lt</tt></a> (&quot;left turn&quot;),
        <a href="dictionary.html#right"><tt>rt</tt></a> (&quot;right
        turn&quot;) and <a href="dictionary.html#tick"><tt>tick</tt></a>,
        are all primitive commands.
      <li>
        <a href="dictionary.html#random"><tt>random</tt></a> and <a href=
        "dictionary.html#turtles"><tt>turtles</tt></a> are primitive
        reporters. <a href="dictionary.html#random"><tt>random</tt></a>
        takes a single number as an input and reports a random integer that
        is less than the input (in this case, between 0 and 9). <a href=
        "dictionary.html#turtles"><tt>turtles</tt></a> reports the agentset
        consisting of all the turtles. (We'll explain about agentsets
        later.)
      </ul>
    <p>
      <tt>setup</tt> and <tt>go</tt> can be called by other procedures, or
      by buttons, or from the Command Center.
    <p>
      Many NetLogo models have a once button that calls a procedure called
      <tt>setup</tt> and a forever button that calls a procedure called
      <tt>go</tt>.
    <p>
      In NetLogo, you may specify which agents -- turtles, patches, or
      links -- are to run each command. If you don't specify, the code
      is run by the observer. In the code above, the observer uses <a href=
      "dictionary.html#ask"><tt>ask</tt></a> to make the set of all turtles
      run the commands between the square brackets.
    <p>
      <a href="dictionary.html#clear-all"><tt>clear-all</tt></a> and
      <a href="dictionary.html#crt"><tt>create-turtles</tt></a> can only be
      run by the observer. <a href="dictionary.html#fd"><tt>fd</tt></a>, on
      the other hand, can only be run by turtles. Some other commands and
      reporters, such as <a href="dictionary.html#set"><tt>set</tt></a> and
      <a href="dictionary.html#ticks"><tt>ticks</tt></a>, can be run by
      different agent types.
    <p>
      Here are some more advanced features you can take advantage of when
      defining your own procedures.
    <p>
      <a name="procedureswinputs" id="procedureswinputs"></a><b>Procedures
      with inputs</b>
    <p>
      Procedures can take inputs, just like many primitives do. To create a
      procedure that accepts inputs, put their names in square brackets
      after the procedure name. For example:
    <pre>
to draw-polygon [num-sides len]  ;; turtle procedure
  pen-down
  repeat num-sides [
    fd len
    rt 360 / num-sides
  ]
end
</pre>
    <p>
      Elsewhere in the program, you might use the procedure by asking the
      turtles to each draw an octagon with a side length equal to its who
      number:
    <pre>
ask turtles [ draw-polygon 8 who ]
</pre>
    <p>
      <a name="reporterprocedures" id="reporterprocedures"></a><b>Reporter
      procedures</b>
    <p>
      Just like you can define your own commands, you can define your own
      reporters. You must do two special things. First, use <a href=
      "dictionary.html#to-report"><tt>to-report</tt></a> instead of
      <a href="dictionary.html#to"><tt>to</tt></a> to begin your procedure.
      Then, in the body of the procedure, use <a href=
      "dictionary.html#report"><tt>report</tt></a> to report the value you
      want to report.
    <pre>
to-report absolute-value [number]
  ifelse number &gt;= 0
    [ report number ]
    [ report (- number) ]
end
</pre>
    <h2>
      <a name="variables" id="variables">Variables</a>
    </h2>
    <p>
      <a name="agentvars" id="agentvars"></a><b>Agent variables</b>
    <p>
      Agent variables are places to store values (such as numbers) in an
      agent. An agent variable can be a global variable, a turtle variable,
      a patch variable, or a link variable.
    <p>
      If a variable is a global variable, there is only one value for the
      variable, and every agent can access it. You can think of global
      variables as belonging to the observer.
    <p>
      Turtle, patch, and link variables are different. Each turtle has its
      <i>own</i> value for every turtle variable. The same goes for patches
      and links.
    <p>
      Some variables are built into NetLogo. For example, all turtles and
      links have a <a href="dictionary.html#color"><tt>color</tt></a>
      variable, and all patches have a <a href=
      "dictionary.html#pcolor"><tt>pcolor</tt></a> variable. (The patch
      variable begins with &quot;p&quot; so it doesn't get confused
      with the turtle variable, since turtles have direct access to patch
      variables.) If you set the variable, the turtle or patch changes
      color. (See next section for details.)
    <p>
      Other built-in turtle variables including <a href=
      "dictionary.html#xcor"><tt>xcor</tt></a>, <a href=
      "dictionary.html#ycor"><tt>ycor</tt></a>, and <a href=
      "dictionary.html#heading"><tt>heading</tt></a>. Other built-in patch
      variables include <a href="dictionary.html#pxcor"><tt>pxcor</tt></a>
      and <a href="dictionary.html#pycor"><tt>pycor</tt></a>. (There is a
      complete list <a href="dictionary.html#builtinvariables">here</a>.)
    <p>
      You can also define your own variables. You can make a global
      variable by adding a switch, slider, chooser, or input box to your
      model, or by using the <a href=
      "dictionary.html#globals"><tt>globals</tt></a> keyword at the
      beginning of your code, like this:
    <pre>
globals [score]
</pre>
    <p>
      You can also define new turtle, patch and link variables using the
      <a href="dictionary.html#turtles-own"><tt>turtles-own</tt></a> ,
      <a href="dictionary.html#patches-own"><tt>patches-own</tt></a> and
      <a href="dictionary.html#links-own"><tt>links-own</tt></a> keywords,
      like this:
    <pre>
turtles-own [energy speed]
patches-own [friction]
links-own [strength]
</pre>
    <p>
      These variables can then be used freely in your model. Use the
      <a href="dictionary.html#set"><tt>set</tt></a> command to set them.
      (Any variable you don't set has a starting value of zero.)
    <p>
      Global variables can be read and set at any time by any agent. As
      well, a turtle can read and set patch variables of the patch it is
      standing on. For example, this code:
    <pre>
ask turtles [ set pcolor red ]
</pre>
    <p>
      causes every turtle to make the patch it is standing on red. (Because
      patch variables are shared by turtles in this way, you can't have
      a turtle variable and a patch variable with the same name.)
    <p>
      In other situations where you want an agent to read a different
      agent's variable, you can use <a href=
      "dictionary.html#of"><tt>of</tt></a>. Example:
    <pre>
show [color] of turtle 5
;; prints current color of turtle with who number 5
</pre>
    <p>
      You can also use <a href="dictionary.html#of"><tt>of</tt></a> with a
      more complicated expression than just a variable name, for example:
    <pre>
show [xcor + ycor] of turtle 5
;; prints the sum of the x and y coordinates of
;; turtle with who number 5
</pre>
    <p>
      <a name="locals" id="locals"></a><b>Local variables</b>
    <p>
      A local variable is defined and used only in the context of a
      particular procedure or part of a procedure. To create a local
      variable, use the <a href="dictionary.html#let"><tt>let</tt></a>
      command. If you use <tt>let</tt> at the top of a procedure, the
      variable will exist throughout the procedure. If you use it inside a
      set of square brackets, for example inside an &quot;ask&quot;, then
      it will exist only inside those brackets.
    <pre>
to swap-colors [turtle1 turtle2]
  let temp [color] of turtle1
  ask turtle1 [ set color [color] of turtle2 ]
  ask turtle2 [ set color temp ]
end
</pre>
    <h2>
      <a name="ticks" id="ticks">Tick counter</a>
    </h2>
    <p>
      In many NetLogo models, time passes in discrete steps, called
      &quot;ticks&quot;. NetLogo includes a built-in tick counter so you
      can keep track of how many ticks have passed.
    <p>
      The current value of the tick counter is shown above the view. (You
      can use the Settings button to hide the tick counter, or change the
      word &quot;ticks&quot; to something else.)
    <p>
      In code, to retrieve the current value of the tick counter, use the
      <a href="dictionary.html#ticks"><tt>ticks</tt></a> reporter. The
      <a href="dictionary.html#tick"><tt>tick</tt></a> command advances the
      tick counter by 1. The <a href=
      "dictionary.html#clear-all"><tt>clear-all</tt></a> command clears the
      tick counter along with everything else.
    <p>
      When the tick counter is clear, it's an error to try to read or
      modify it. Use the <a href=
      "dictionary.html#reset-ticks"><tt>reset-ticks</tt></a> command when
      your model is done setting up, to start the tick counter.
    <p>
      If your model is set to use tick-based updates, then the <a href=
      "dictionary.html#tick"><tt>tick</tt></a> command will usually also
      update the view. See the later section, <a href="#updates">View
      Updates</a>.
    <h3>
      When to tick
    </h3>
    <p>
      Use <a href="dictionary.html#reset-ticks"><tt>reset-ticks</tt></a> at
      the end of your setup procedure.
    <p>
      Use <a href="dictionary.html#tick"><tt>tick</tt></a> at the end of
      your go procedure.
    <pre>
to setup
  clear-all
  create-turtles 10
  reset-ticks
end

to go
  ask turtles [ fd 1 ]
  tick
end
</pre>
    <h3>
      Fractional ticks
    </h3>
    <p>
      In most models, the tick counter starts at 0 and goes up 1 at a time,
      from integer to integer. But it's also possible for the tick
      counter to take on in-between floating point values.
    <p>
      To advance the tick counter by a fractional amount, use the <a href=
      "dictionary.html#tick-advance"><tt>tick-advance</tt></a> command.
      This command takes a numeric input specifying how far to advance the
      tick counter.
    <p>
      A typical use of fractional ticks is to approximate continuous or
      curved motion. See, for example, the GasLab models in the Models
      Library (under Chemistry &amp; Physics). These models calculate the
      exact time at which a future event is to occur, then advance the tick
      counter to exactly that time.
    <h2>
      <a name="colors" id="colors">Colors</a>
    </h2>
    <p>
      NetLogo represents colors in different ways. A color can be number in
      the range 0 to 140, with the exception of 140 itself. Below is a
      chart showing the range of such colors you can use in NetLogo.
    <p class="screenshot">
      <img alt="[color chart]" src="images/colors.jpg">
    <p>
      The chart shows that:
    <ul>
      <li>Some of the colors have names. (You can use these names in your
      code.)
      <li>Every named color except black and white has a number ending in
      5.
      <li>On either side of each named color are darker and lighter shades
      of the color.
      <li>0 is pure black. 9.9 is pure white.
      <li>10, 20, and so on are all so dark they are very nearly black.
      <li>19.9, 29.9 and so on are all so light they are very nearly white.
      </ul>
    <blockquote>
      <p>
        <b>Code Example:</b> The color chart was made in NetLogo with the
        Color Chart Example model.
      </blockquote>
    <p>
      If you use a number outside the 0 to 140 range, NetLogo will
      repeatedly add or subtract 140 from the number until it is in the 0
      to 140 range. For example, 25 is orange, so 165, 305, 445, and so on
      are orange too, and so are -115, -255, -395, etc. This calculation is
      done automatically whenever you set the turtle variable <a href=
      "dictionary.html#color"><tt>color</tt></a> or the patch variable
      <a href="dictionary.html#pcolor"><tt>pcolor</tt></a>. Should you need
      to perform this calculation in some other context, use the <a href=
      "dictionary.html#wrap-color"><tt>wrap-color</tt></a> primitive.
    <p>
      If you want a color that's not on the chart, more exist between
      the integers. For example, 26.5 is a shade of orange halfway between
      26 and 27. This doesn't mean you can make any color in NetLogo;
      the NetLogo color space is only a subset of all possible colors. It
      contains only a fixed set of discrete hues (one hue per row of the
      chart). Starting from one of those hues, you can either decrease its
      brightness (darken it) or decrease its saturation (lighten it), but
      you cannot decrease both brightness and saturation. Also, only the
      first digit after the decimal point is significant. Thus, color
      values are rounded down to the next 0.1, so for example, there's
      no visible difference between 26.5 and 26.52 or 26.58.
    <p>
      <b>Color primitives</b>
    <p>
      There are a few primitives that are helpful for working with colors.
    <p>
      We have already mentioned the <a href=
      "dictionary.html#wrap-color"><tt>wrap-color</tt></a> primitive.
    <p>
      The <a href="dictionary.html#scale-color"><tt>scale-color</tt></a>
      primitive is useful for converting numeric data into colors.
    <p>
      <a href="dictionary.html#shade-of"><tt>shade-of?</tt></a> will tell
      you if two colors are both &quot;shades&quot; of the same basic hue.
      For example, <tt>shade-of? orange 27</tt> is true, because 27 is a
      lighter shade of orange.
    <blockquote>
      <p>
        <b>Code Example:</b> Scale-color Example demonstrates the
        scale-color reporter.
      </blockquote>
    <p>
      <b>RGB and RGBA Colors</b>
    <p>
      NetLogo also represents colors as RGB (red/green/blue) lists and RGBA
      (red/green/blue/alpha) lists. When using RGB colors the full range of
      colors is available to you. RGBA colors allow all the colors that RGB
      allows and you can also vary the transparency of a color. RGB and
      RGBA lists are made up of three or four integers, respectively,
      between 0 and 255 if a number is outside that range 255 is repeatedly
      subtracted until it is in the range. You can set any color variables
      in NetLogo (<a href="dictionary.html#color"><tt>color</tt></a> for
      turtles and links and <a href=
      "dictionary.html#pcolor"><tt>pcolor</tt></a> for patches) to an RGB
      list and that agent will be rendered appropriately. So you can set
      the color of patch 0 0 to pure red using the following code:
    <pre>
set pcolor [255 0 0]
</pre>
    <p>
      Turtles, links, and labels can all contain RGBA lists as their color
      variables, however, patches cannot have RGBA <tt>pcolors</tt> You can
      set the color of a turtle to be approximately half transparent pure
      red with the following code:
    <pre>
set color [255 0 0 125]
</pre>
    <p>
      You can convert from a NetLogo color to RGB or HSB
      (hue/saturation/brightness) using <a href=
      "dictionary.html#extract-hsb"><tt>extract-hsb</tt></a> and <a href=
      "dictionary.html#extract-rgb"><tt>extract-rgb</tt></a>. You can use
      <a href="dictionary.html#rgb"><tt>rgb</tt></a> to generate rgb lists
      and <a href="dictionary.html#hsb"><tt>hsb</tt></a> to convert from an
      HSB color to RGB.
    <p>
      Since many colors are missing from the NetLogo color space, <a href=
      "dictionary.html#approximate-hsb"><tt>approximate-hsb</tt></a> and
      <a href=
      "dictionary.html#approximate-rgb"><tt>approximate-rgb</tt></a> often
      can't give you the exact color you ask for, but they try to come
      as close as possible.
    <p>
      Example: you can change any turtle from it's existing NetLogo
      color to a half transparent version of that color using:
    <pre>
set color lput 125 extract-rgb color
</pre>
    <blockquote>
      <p>
        <b>Code Examples:</b> HSB and RGB Example (lets you experiment with
        the HSB and RGB color systems), Transparency Example
      </blockquote>
    <p>
      <b>Color Swatches dialog</b>
    <p>
      The Color Swatches dialog helps you experiment with and choose
      colors. Open it by choosing Color Swatches on the Tools Menu.
    <p class="screenshot">
      <img alt="screen shot" src="images/colorswatches.jpg">
    <p>
      When you click on a color swatch (or a color button), that color will
      be shown against other colors. In the bottom left, the code for the
      currently selected color is displayed (for example, <tt>red + 2</tt>)
      so you can copy and paste it into your code. On the bottom right
      there are three increment options, 1, 0.5, and 0.1. These numbers
      indicate the difference between two adjacent swatches. When the
      increment is 1 there are 10 different shades in each row; when the
      increment is 0.1 there are 100 different shades in each row. 0.5 is
      an intermediate setting.
    <h2>
      <a name="ask" id="ask">Ask</a>
    </h2>
    <p>
      NetLogo uses the <a href="dictionary.html#ask"><tt>ask</tt></a>
      command to give commands to turtles, patches, and links. All code to
      be run by turtles <i>must</i> be located in a turtle
      &quot;context&quot;. You can establish a turtle context in any of
      three ways:
    <ul>
      <li>In a button, by choosing &quot;Turtles&quot; from the popup menu.
      Any code you put in the button will be run by all turtles.
      <li>In the Command Center, by choosing &quot;Turtles&quot; from the
      popup menu. Any commands you enter will be run by all the turtles.
      <li>By using <tt>ask turtles</tt>, <tt>hatch</tt>, or other commands
      which establish a turtle context.
      </ul>
    <p>
      The same goes for patches, links, and the observer, except that you
      cannot <a href="dictionary.html#ask"><tt>ask</tt></a> the observer.
      Any code that is not inside any <a href=
      "dictionary.html#ask"><tt>ask</tt></a> is by default observer code.
    <p>
      Here's an example of the use of <a href=
      "dictionary.html#ask"><tt>ask</tt></a> in a NetLogo procedure:
    <pre>
to setup
  clear-all
  create-turtles 100   ;; create 100 turtles with random headings
  ask turtles
    [ set color red    ;; turn them red
      fd 50 ]          ;; spread them around
  ask patches
    [ if pxcor &gt; 0         ;; patches on the right side
        [ set pcolor green ] ]  ;; of the view turn green
  reset-ticks
end
</pre>
    <p>
      The models in the Models Library are full of other examples. A good
      place to start looking is in the Code Examples section.
    <p>
      Usually, the observer uses <a href=
      "dictionary.html#ask"><tt>ask</tt></a> to ask all turtles, all
      patches or all links to run commands. You can also use <a href=
      "dictionary.html#ask"><tt>ask</tt></a> to have an individual turtle,
      patch or link run commands. The reporters <a href=
      "dictionary.html#turtle"><tt>turtle</tt></a>, <a href=
      "dictionary.html#patch"><tt>patch</tt></a>, <a href=
      "dictionary.html#link"><tt>link</tt></a> and <a href=
      "dictionary.html#patch-at"><tt>patch-at</tt></a> are useful for this
      technique. For example:
    <pre>
to setup
  clear-all
  crt 3                           ;; make 3 turtles
  ask turtle 0                    ;; tell the first one...
    [ fd 1 ]                      ;; ...to go forward
  ask turtle 1                    ;; tell the second one...
    [ set color green ]           ;; ...to become green
  ask turtle 2                    ;; tell the third one...
    [ rt 90 ]                     ;; ...to turn right
  ask patch 2 -2                  ;; ask the patch at (2,-2)
    [ set pcolor blue ]           ;; ...to become blue
  ask turtle 0                    ;; ask the first turtle
    [ ask patch-at 1 0            ;; ...to ask patch to the east
      [ set pcolor red ] ]        ;; ...to become red
  ask turtle 0                    ;; tell the first turtle...
    [ create-link-with turtle 1 ] ;; ...make a link with the second
  ask link 0 1                    ;; tell the link between turtle 0 and 1
    [ set color blue ]            ;; ...to become blue
  reset-ticks
end
</pre>
    <p>
      Every turtle created has a who number. The first turtle created is
      number 0, the second turtle number 1, and so forth.
    <p>
      The <a href="dictionary.html#turtle"><tt>turtle</tt></a> primitive
      reporter takes a who number as an input, and reports the turtle with
      that who number. The <a href=
      "dictionary.html#patch"><tt>patch</tt></a> primitive reporter takes
      values for pxcor and pycor and reports the patch with those
      coordinates. The <a href="dictionary.html#link"><tt>link</tt></a>
      primitive takes two inputs, the who numbers of the two turtles it
      connects. And the <a href=
      "dictionary.html#patch-at"><tt>patch-at</tt></a> primitive reporter
      takes <i>offsets</i>: distances, in the x and y directions,
      <i>from</i> the first agent. In the example above, the turtle with
      who number 0 is asked to get the patch east (and no patches north) of
      itself.
    <p>
      You can also select a subset of turtles, or a subset of patches, or a
      subset of links and ask them to do something. This involves using
      <b>agentsets</b>. The next section explains them in detail.
    <p>
      When you ask a set of agents to run more than one command, each agent
      must finish before the next agent starts. One agent runs all of the
      commands, then the next agent runs all of them, and so on. For
      example, if you write:
    <pre>
ask turtles
  [ fd 1
    set color red ]
</pre>
    <p>
      first one turtle moves and turns red, then another turtle moves and
      turns red, and so on.
    <p>
      But if you write it this way:
    <pre>
ask turtles [ fd 1 ]
ask turtles [ set color red ]
</pre>
    <p>
      first all the turtles move, then they all turn red.
    <p>
      (Another form of the <a href="dictionary.html#ask"><tt>ask</tt></a>
      command, with a different ordering rule, is also available. See
      <a href="#ask-concurrent">Ask-Concurrent</a> below.)
    <h2>
      <a name="agentsets" id="agentsets">Agentsets</a>
    </h2>
    <p>
      An agentset is exactly what its name implies, a set of agents. An
      agentset can contain either turtles, patches or links, but not more
      than one type at once.
    <p>
      An agentset is not in any particular order. In fact, it's always
      in a random order. And every time you use it, the agentset is in a
      <i>different</i> random order. This helps you keep your model from
      treating any particular turtles, patches or links differently from
      any others (unless you want them to be). Since the order is random
      every time, no one agent always gets to go first.
    <p>
      You've seen the <a href=
      "dictionary.html#turtles"><tt>turtles</tt></a> primitive, which
      reports the agentset of all turtles, the <a href=
      "dictionary.html#patches"><tt>patches</tt></a> primitive, which
      reports the agentset of all patches and the <a href=
      "dictionary.html#links"><tt>links</tt></a> primitive which reports
      the agentset of all links.
    <p>
      But what's powerful about the agentset concept is that you can
      construct agentsets that contain only <i>some</i> turtles,
      <i>some</i> patches or <i>some</i> links. For example, all the red
      turtles, or the patches with pxcor evenly divisible by five, or the
      turtles in the first quadrant that are on a green patch or the links
      connected to turtle 0. These agentsets can then be used by <a href=
      "dictionary.html#ask"><tt>ask</tt></a> or by various reporters that
      take agentsets as inputs.
    <p>
      One way is to use <a href=
      "dictionary.html#turtles-here"><tt>turtles-here</tt></a> or
      <tt><a href="dictionary.html#turtles-at">turtles-at</a></tt>, to make
      an agentset containing only the turtles on my patch, or only the
      turtles on some other patch at some x and y offsets. There's also
      <a href="dictionary.html#turtles-on"><tt>turtles-on</tt></a> so you
      can get the set of turtles standing on a given patch or set of
      patches, or the set of turtles standing on the same patch as a given
      turtle or set of turtles.
    <p>
      Here are some more examples of how to make agentsets:
    <pre>
;; all other turtles:
other turtles
;; all other turtles on this patch:
other turtles-here
;; all red turtles:
turtles with [color = red]
;; all red turtles on my patch
turtles-here with [color = red]
;; patches on right side of view
patches with [pxcor &gt; 0]
;; all turtles less than 3 patches away
turtles in-radius 3
;; the four patches to the east, north, west, and south
patches at-points [[1 0] [0 1] [-1 0] [0 -1]]
;; shorthand for those four patches
neighbors4
;; turtles in the first quadrant that are on a green patch
turtles with [(xcor &gt; 0) and (ycor &gt; 0)
              and (pcolor = green)]
;; turtles standing on my neighboring four patches
turtles-on neighbors4
;; all the links connected to turtle 0
[my-links] of turtle 0
</pre>
    <p>
      Note the use of <a href="dictionary.html#other"><tt>other</tt></a> to
      exclude this agent. This is common.
    <p>
      Once you have created an agentset, here are some simple things you
      can do:
    <ul>
      <li>Use <a href="dictionary.html#ask"><tt>ask</tt></a> to make the
      agents in the agentset do something
      <li>Use <a href="dictionary.html#any"><tt>any?</tt></a> to see if the
      agentset is empty
      <li>Use <a href="dictionary.html#all"><tt>all?</tt></a> to see if
      every agent in an agentset satisfies a condition.
      <li>Use <a href="dictionary.html#count"><tt>count</tt></a> to find
      out exactly how many agents are in the set
      </ul>
    <p>
      And here are some more complex things you can do:
    <ul>
      <li>Pick a random agent from the set using <a href=
      "dictionary.html#one-of"><tt>one-of</tt></a>. For example, we can
      make a randomly chosen turtle turn green:
        <pre>
ask one-of turtles [ set color green ]
</pre>Or tell a randomly chosen patch to <a href="dictionary.html#sprout">
        <tt>sprout</tt></a> a new turtle:
        <pre>
ask one-of patches [ sprout 1 ]
</pre>
      <li>Use the <a href=
      "dictionary.html#max-one-of"><tt>max-one-of</tt></a> or <a href=
      "dictionary.html#min-one-of"><tt>min-one-of</tt></a> reporters to
      find out which agent is the most or least along some scale. For
      example, to remove the richest turtle, you could say
        <pre>
ask max-one-of turtles [sum assets] [ die ]
</pre>
      <li>Make a histogram of the agentset using the <a href=
      "dictionary.html#histogram"><tt>histogram</tt></a> command (in
      combination with <a href="dictionary.html#of"><tt>of</tt></a>).
      <li>Use <a href="dictionary.html#of"><tt>of</tt></a> to make a list
      of values, one for each agent in the agentset. Then use one of
      NetLogo's list primitives to do something with the list. (See the
      &quot;Lists&quot; section <a href="#lists">below</a>.) For example,
      to find out how rich turtles are on the average, you could say
        <pre>
show mean [sum assets] of turtles
</pre>
      <li>Use <a href="dictionary.html#turtle-set"><tt>turtle-set</tt></a>,
      <a href="dictionary.html#patch-set"><tt>patch-set</tt></a> and
      <a href="dictionary.html#link-set"><tt>link-set</tt></a> reporters to
      make new agentsets by gathering together agents from a variety of
      possible sources.
      <li>Use <a href="dictionary.html#no-turtles"><tt>no-turtles</tt></a>,
      <a href="dictionary.html#no-patches"><tt>no-patches</tt></a> and
      <a href="dictionary.html#no-links"><tt>no-links</tt></a> reporters to
      make empty agentsets.
      <li>Check whether two agentsets are equal using <a href=
      "dictionary.html#symbolequal"><tt>=</tt></a> or <a href=
      "dictionary.html#symbolnotequal"><tt>!=</tt></a>.
      <li>Use <a href="dictionary.html#member"><tt>member?</tt></a> to see
      whether a particular agent is a member of an agentset.
      </ul>
    <p>
      This only scratches the surface. See the Models Library for many more
      examples, and consult the NetLogo Dictionary for more information
      about all of the agentset primitives.
    <p>
      More examples of using agentsets are provided in the individual
      entries for these primitives in the NetLogo Dictionary.
    <h3>
      Special agentsets
    </h3>
    <p>
      The agentsets <tt>turtles</tt> and <tt>links</tt> have special
      behavior because they always hold the sets of <i>all</i> turtles and
      <i>all</i> links. Therefore, these agentsets can grow.
    <p>
      The following interaction shows the special behavior. Assume the Code
      tab has <tt>globals [g]</tt>. Then:
    <pre>
observer&gt; clear-all
observer&gt; create-turtles 5
observer&gt; set g turtles
observer&gt; print count g
5
observer&gt; create-turtles 5
observer&gt; print count g
10
observer&gt; set g turtle-set turtles
observer&gt; print count g
10
observer&gt; create-turtles 5
observer&gt; print count g
10
observer&gt; print count turtles
15
</pre>
    <p>
      The <tt>turtles</tt> agentset grows when new turtles are born, but
      other agentsets don't grow. If I write <tt>turtle-set
      turtles</tt>, I get a new, normal agentset containing just the
      turtles that <i>currently</i> exist. New turtles don't join when
      they're born.
    <p>
      Breed agentsets are special in the same way as <tt>turtles</tt> and
      <tt>links</tt>. Breeds are introduced and explained below.
    <h3>
      Agentsets and lists
    </h3>
    <p>
      Earlier, we said that agentsets are always in random order, a
      different random order every time. If you need your agents to do
      something in a fixed order, you need to make a list of the agents
      instead. See the Lists section below.
    <blockquote>
      <p>
        <b>Code Example:</b> Ask Ordering Example
      </blockquote>
    <h2>
      <a name="breeds" id="breeds">Breeds</a>
    </h2>
    <p>
      NetLogo allows you to define different &quot;breeds&quot; of turtles
      and breeds of links. Once you have defined breeds, you can go on and
      make the different breeds behave differently. For example, you could
      have breeds called <tt>sheep</tt> and <tt>wolves</tt>, and have the
      wolves try to eat the sheep or you could have link breeds called
      <tt>streets</tt> and <tt>sidewalks</tt> where foot traffic is routed
      on sidewalks and car traffic is routed on streets.
    <p>
      You define turtle breeds using the <a href=
      "dictionary.html#breed"><tt>breed</tt></a> keyword, at the top of the
      Code tab, before any procedures:
    <pre>
breed [wolves wolf]
breed [sheep a-sheep]
</pre>
    <p>
      You can refer to a member of the breed using the singular form, just
      like the <a href="dictionary.html#turtle"><tt>turtle</tt></a>
      reporter. When printed, members of the breed will be labeled with the
      singular name.
    <p>
      Some commands and reporters have the plural name of the breed in
      them, such as <a href=
      "dictionary.html#create-turtles"><tt>create-&lt;breeds&gt;</tt></a>.
      Others have the singular name of the breed in them, such as <a href=
      "dictionary.html#turtle"><tt>&lt;breed&gt;</tt></a>
    <p>
      The order in which breeds are declared is also the order order in
      which they are layered in the view. So breeds defined later will
      appear on top of breeds defined earlier; in this example, sheep will
      be drawn over wolves.
    <p>
      When you define a breed such as <tt>sheep</tt>, an agentset for that
      breed is automatically created, so that all of the agentset
      capabilities described above are immediately available with the
      <tt>sheep</tt> agentset.
    <p>
      The following new primitives are also automatically available once
      you define a breed: <a href=
      "dictionary.html#create-breeds"><tt>create-sheep</tt></a>, <a href=
      "dictionary.html#hatch-breeds"><tt>hatch-sheep</tt></a>, <a href=
      "dictionary.html#sprout-breeds"><tt>sprout-sheep</tt></a>, <a href=
      "dictionary.html#breeds-here"><tt>sheep-here</tt></a>, <a href=
      "dictionary.html#breeds-at"><tt>sheep-at</tt></a>, <a href=
      "dictionary.html#breeds-on"><tt>sheep-on</tt></a>, and <a href=
      "dictionary.html#is-breed"><tt>is-a-sheep?</tt></a>.
    <p>
      Also, you can use <a href=
      "dictionary.html#breeds-own"><tt>sheep-own</tt></a> to define new
      turtle variables that only turtles of the given breed have. (It's
      allowed for more than one breed to own the same variable.)
    <p>
      A turtle's breed agentset is stored in the <a href=
      "dictionary.html#breedvar"><tt>breed</tt></a> turtle variable. So you
      can test a turtle's breed, like this:
    <pre>
if breed = wolves [ ... ]
</pre>
    <p>
      Note also that turtles can change breeds. A wolf doesn't have to
      remain a wolf its whole life. Let's change a random wolf into a
      sheep:
    <pre>
ask one-of wolves [ set breed sheep ]
</pre>
    <p>
      The <a href=
      "dictionary.html#set-default-shape"><tt>set-default-shape</tt></a>
      primitive is useful for associating certain turtle shapes with
      certain breeds. See the section on shapes <a href=
      "#shapes">below</a>.
    <p>
      Who numbers are assigned irrespective of breeds. If you already have
      a <tt>frog 0</tt>, then the first mouse will be <tt>mouse 1</tt>, not
      <tt>mouse 0</tt>, since the who number 0 is already taken.
    <p>
      Here is a quick example of using breeds:
    <pre>
breed [mice mouse]
breed [frogs frog]
mice-own [cheese]
to setup
  clear-all
  create-mice 50
    [ set color white
      set cheese random 10 ]
  create-frogs 50
    [ set color green ]
  reset-ticks
end
</pre>
    <blockquote>
      <p>
        <b>Code Example:</b> Breeds and Shapes Example
      </blockquote>
    <h3>
      Link breeds
    </h3>
    <p>
      Link breeds are very similar to turtle breeds, however, there are a
      few differences.
    <p>
      When you declare a link breed you must declare whether it is a breed
      of directed or undirected links by using the <a href=
      "dictionary.html#directed-link-breed"><tt>directed-link-breed</tt></a>
      and <a href=
      "dictionary.html#undirected-link-breed"><tt>undirected-link-breed</tt></a>
      keywords.
    <pre>
directed-link-breed [streets street]
undirected-link-breed [friendships friendship]
</pre>
    <p>
      Once you have created a breeded link you cannot create unbreeded
      links and vice versa. (You can, however, have directed and undirected
      links in the same world, just not in the same breed)
    <p>
      Unlike with turtle breeds the singular breed name is required for
      link breeds, as many of the link commands and reports use the
      singular name, such as <a href=
      "dictionary.html#breed-neighbor"><tt>&lt;link-breed&gt;-neighbor?</tt></a>.
    <p>
      The following primitives are also automatically available once you
      define a directed link breed: <a href=
      "dictionary.html#create-breed-from"><tt>create-street-from</tt></a>
      <a href=
      "dictionary.html#create-breed-from"><tt>create-streets-from</tt></a>
      <a href=
      "dictionary.html#create-breed-to"><tt>create-street-to</tt></a>
      <a href=
      "dictionary.html#create-breed-to"><tt>create-streets-to</tt></a>
      <a href=
      "dictionary.html#in-breed-neighbor"><tt>in-street-neighbor?</tt></a>
      <a href=
      "dictionary.html#in-breed-neighbors"><tt>in-street-neighbors</tt></a>
      <a href="dictionary.html#in-breed-from"><tt>in-street-from</tt></a>
      <a href="dictionary.html#my-in-breeds"><tt>my-in-streets</tt></a>
      <a href="dictionary.html#my-out-breeds"><tt>my-out-streets</tt></a>
      <a href=
      "dictionary.html#out-breed-neighbor"><tt>out-street-neighbor?</tt></a>
      <a href=
      "dictionary.html#out-breed-neighbors"><tt>out-street-neighbors</tt></a>
      <a href="dictionary.html#out-breed-to"><tt>out-street-to</tt></a>
    <p>
      And the following are automatically available when you define an
      undirected link breed: <a href=
      "dictionary.html#create-breed-with"><tt>create-friendship-with</tt></a>
      <a href=
      "dictionary.html#create-breeds-with"><tt>create-friendships-with</tt></a>
      <a href=
      "dictionary.html#breed-neighbor"><tt>friendship-neighbor?</tt></a>
      <a href=
      "dictionary.html#breed-neighbors"><tt>friendship-neighbors</tt></a>
      <a href="dictionary.html#breed-with"><tt>friendship-with</tt></a>
      <a href="dictionary.html#my-breeds"><tt>my-friendships</tt></a>
    <p>
      Multiple link breeds may declare the same <tt>-own</tt> variable, but
      a variable may not be shared between a turtle breed and a link breed.
    <p>
      Just as with turtle breeds the order in which link breeds are
      declared defines the order in which the links are drawn, so the
      friendships will always be on top of streets (if for some reason
      these breeds were in the same model). You can also use <a href=
      "dictionary.html#link-breeds-own"><tt>&lt;link-breeds&gt;-own</tt></a>
      to declare variables of each link breed separately.
    <p>
      You can change the breed of a link with <tt>set breed</tt>. (However,
      you cannot change a breeded link to an unbreeded one, to prevent
      having breeded and unbreeded links in the same world.)
    <pre>
ask one-of friendships [ set breed streets ]
ask one-of friendships [ set breed links ] ;; produces a runtime error
</pre>
    <p>
      <a href=
      "dictionary.html#set-default-shape"><tt>set-default-shape</tt></a>
      may also be used with link breeds to associate it with a particular
      link shape.
    <blockquote>
      <p>
        <b>Code Example:</b> Link Breeds Example
      </blockquote>
    <h2>
      <a name="buttons" id="buttons">Buttons</a>
    </h2>
    <p>
      Buttons in the interface tab provide an easy way to control the
      model. Typically a model will have at least a &quot;setup&quot;
      button, to set up the initial state of the world, and a
      &quot;go&quot; button to make the model run continuously. Some models
      will have additional buttons that perform other actions.
    <p>
      A button contains some NetLogo code. That code is run when you press
      the button.
    <p>
      A button may be either a &quot;once button&quot;, or a &quot;forever
      button&quot;. You can control this by editing the button and checking
      or unchecking the &quot;Forever&quot; checkbox. Once buttons run
      their code once, then stop and pop back up. Forever buttons keep
      running their code over and over again, until either the code hits
      the <a href="dictionary.html#stop"><tt>stop</tt></a> command, or you
      press the button again to stop it. If you stop the button, the code
      doesn't get interrupted. The button waits until the code has
      finished, then pops up.
    <p>
      Normally, a button is labeled with the code that it runs. For
      example, a button that says &quot;go&quot; on it usually contains the
      code &quot;go&quot;, which means &quot;run the go procedure&quot;.
      (Procedures are defined in the Code tab; see below.) But you can also
      edit a button and enter a &quot;display name&quot; for the button,
      which is a text that appears on the button instead of the code. You
      might use this feature if you think the actual code would be
      confusing to your users.
    <p>
      When you put code in a button, you must also specify which agents you
      want to run that code. You can choose to have the observer run the
      code, or all turtles, or all patches, or all links. (If you want the
      code to be run by only some turtles or some patches, you could make
      an observer button, and then have the observer use the <a href=
      "dictionary.html#ask"><tt>ask</tt></a> command to ask only some of
      the turtles or patches to do something.)
    <p>
      When you edit a button, you have the option to assign an &quot;action
      key&quot;. This makes that key on the keyboard behave just like a
      button press. If the button is a forever button, it will stay down
      until the key is pressed again (or the button is clicked). Action
      keys are particularly useful for games or any model where rapid
      triggering of buttons is needed.
    <p>
      <b>Buttons take turns</b>
    <p>
      More than one button can be pressed at a time. If this happens, the
      buttons &quot;take turns&quot;, which means that only one button runs
      at a time. Each button runs its code all the way through once while
      the other buttons wait, then the next button gets its turn.
    <p>
      In the following examples, &quot;setup&quot; is a once button and
      &quot;go&quot; is a forever button.
    <p>
      Example #1: The user presses &quot;setup&quot;, then presses
      &quot;go&quot; immediately, before the &quot;setup&quot; has popped
      back up. Result: &quot;setup&quot; finishes before &quot;go&quot;
      starts.
    <p>
      Example #2: While the &quot;go&quot; button is down, the user presses
      &quot;setup&quot;. Result: the &quot;go&quot; button finishes its
      current iteration. Then the &quot;setup&quot; button runs. Then
      &quot;go&quot; starts running again.
    <p>
      Example #3: The user has two forever buttons down at the same time.
      Result: first one button runs its code all the way through, then the
      other runs its code all the way through, and so on, alternating.
    <p>
      Note that if one button gets stuck in an infinite loop, then no other
      buttons will run.
    <p>
      <b>Turtle, patch, and link forever buttons</b>
    <p>
      There is a subtle difference between putting commands in a turtle,
      patch or link forever button, and putting the same commands in an
      observer button that does <tt>ask turtles</tt>, <tt>ask patches</tt>
      or <tt>ask links</tt>. An &quot;ask&quot; doesn't complete until
      all of the agents have finished running all of the commands in the
      &quot;ask&quot;. So the agents, as they all run the commands
      concurrently, can be out of sync with each other, but they all sync
      up again at the end of the ask. The same isn't true of turtle,
      patch and link forever buttons. Since <a href=
      "dictionary.html#ask"><tt>ask</tt></a> was not used, each turtle or
      patch runs the given code over and over again, so they can become
      (and remain) out of sync with each other.
    <p>
      At present, this capability is very rarely used in the models in our
      Models Library. A model that does use the capability is the Termites
      model, in the Biology section of Sample Models. The &quot;go&quot;
      button is a turtle forever button, so each termite proceeds
      independently of every other termite, and the observer is not
      involved at all. This means that if, for example, you wanted to add
      ticks and/or a plot to the model, you would need to add a second
      forever button (an observer forever button), and run both forever
      buttons at the same time. Note also that a model like this cannot be
      used with BehaviorSpace.
    <blockquote>
      <p>
        <b>Code Example:</b> State Machine Example shows how Termites can
        be recoded in a tick-based way, without using a turtle forever
        button.
      </blockquote>
    <p>
      At present, NetLogo has no way for one forever button to start
      another. Buttons are only started when you press them.
    <h2>
      <a name="lists" id="lists">Lists</a>
    </h2>
    <p>
      In the simplest models, each variable holds only one piece of
      information, usually a number or a string. Lists let you store
      multiple pieces of information in a single value by collecting that
      information in a list. Each value in the list can be any type of
      value: a number, or a string, an agent or agentset, or even another
      list.
    <p>
      Lists allow for the convenient packaging of information in NetLogo.
      If your agents carry out a repetitive calculation on multiple
      variables, it might be easier to have a list variable, instead of
      multiple number variables. Several primitives simplify the process of
      performing the same computation on each value in a list.
    <p>
      The <a href="dictionary.html">NetLogo Dictionary</a> has a section
      that lists all of the list-related primitives.
    <p>
      <b>Constant lists</b>
    <p>
      You can make a list by simply putting the values you want in the list
      between brackets, like this: <tt>set mylist [2 4 6 8]</tt>. Note that
      the individual values are separated by spaces. You can make lists
      that contain numbers and strings this way, as well as lists within
      lists, for example <tt>[[2 4] [3 5]]</tt>.
    <p>
      The empty list is written by putting nothing between the brackets,
      like this: <tt>[]</tt>.
    <p>
      <b>Building lists on the fly</b>
    <p>
      If you want to make a list in which the values are determined by
      reporters, as opposed to being a series of constants, use the
      <a href="dictionary.html#list"><tt>list</tt></a> reporter. The
      <a href="dictionary.html#list"><tt>list</tt></a> reporter accepts two
      other reporters, runs them, and reports the results as a list.
    <p>
      If I wanted a list to contain two random values, I might use the
      following code:
    <pre>
set random-list list (random 10) (random 20)
</pre>
    <p>
      This will set <tt>random-list</tt> to a new list of two random
      integers each time it runs.
    <p>
      To make longer or shorter lists, you can use the <a href=
      "dictionary.html#list"><tt>list</tt></a> reporter with fewer or more
      than two inputs, but in order to do so, you must enclose the entire
      call in parentheses, e.g.:
    <pre>
(list random 10)
(list random 10 random 20 random 30)
</pre>
    <p>
      For more information, see <a href="#variadic">Varying number of
      inputs</a>.
    <p>
      Some kinds of lists are most easily built using the <a href=
      "dictionary.html#n-values"><tt>n-values</tt></a> reporter, which
      allows you to construct a list of a specific length by repeatedly
      running a given reporter. You can make a list of the same value
      repeated, or all the numbers in a range, or a lot of random numbers,
      or many other possibilities. See dictionary entry for details and
      examples.
    <p>
      The <a href="dictionary.html#of"><tt>of</tt></a> primitive lets you
      construct a list from an agentset. It reports a list containing each
      agent's value for the given reporter. (The reporter could be a
      simple variable name, or a more complex expression -- even a call to
      a procedure defined using <a href=
      "dictionary.html#to-report"><tt>to-report</tt></a>.) A common idiom
      is
    <pre>
max [...] of turtles
sum [...] of turtles
</pre>
    <p>
      and so on.
    <p>
      You can combine two or more lists using the <a href=
      "dictionary.html#sentence"><tt>sentence</tt></a> reporter, which
      concatenates lists by combining their contents into a single, larger
      list. Like <a href="dictionary.html#list"><tt>list</tt></a>, <a href=
      "dictionary.html#sentence"><tt>sentence</tt></a> normally takes two
      inputs, but can accept any number of inputs if the call is surrounded
      by parentheses.
    <p>
      <b>Changing list items</b>
    <p>
      Technically, lists can't be modified, but you can construct new
      lists based on old lists. If you want the new list to replace the old
      list, use <a href="dictionary.html#set"><tt>set</tt></a>. For
      example:
    <pre>
set mylist [2 7 5 Bob [3 0 -2]]
; mylist is now [2 7 5 Bob [3 0 -2]]
set mylist replace-item 2 mylist 10
; mylist is now [2 7 10 Bob [3 0 -2]]
</pre>
    <p>
      The <a href="dictionary.html#replace-item"><tt>replace-item</tt></a>
      reporter takes three inputs. The first input specifies which item in
      the list is to be changed. 0 means the first item, 1 means the second
      item, and so forth.
    <p>
      To add an item, say 42, to the end of a list, use the <a href=
      "dictionary.html#lput"><tt>lput</tt></a> reporter. (<a href=
      "dictionary.html#fput"><tt>fput</tt></a> adds an item to the
      beginning of a list.)
    <pre>
set mylist lput 42 mylist
; mylist is now [2 7 10 Bob [3 0 -2] 42]
</pre>
    <p>
      But what if you changed your mind? The <a href=
      "dictionary.html#but-last"><tt>but-last</tt></a> (<tt>bl</tt> for
      short) reporter reports all the list items but the last.
    <pre>
set mylist but-last mylist
; mylist is now [2 7 10 Bob [3 0 -2]]
</pre>
    <p>
      Suppose you want to get rid of item 0, the 2 at the beginning of the
      list.
    <pre>
set mylist but-first mylist
; mylist is now [7 10 Bob [3 0 -2]]
</pre>
    <p>
      Suppose you wanted to change the third item that's nested inside
      item 3 from -2 to 9? The key is to realize that the name that can be
      used to call the nested list [3 0 -2] is <tt>item 3 mylist</tt>. Then
      the <a href="dictionary.html#replace-item"><tt>replace-item</tt></a>
      reporter can be nested to change the list-within-a-list. The
      parentheses are added for clarity.
    <pre>
set mylist (replace-item 3 mylist
                  (replace-item 2 (item 3 mylist) 9))
; mylist is now [7 10 Bob [3 0 9]]
</pre>
    <p>
      <b>Iterating over lists</b>
    <p>
      If you want to do some operation on each item in a list in turn, the
      <a href="dictionary.html#foreach"><tt>foreach</tt></a> command and
      the <a href="dictionary.html#map"><tt>map</tt></a> reporter may be
      helpful.
    <p>
      <a href="dictionary.html#foreach"><tt>foreach</tt></a> is used to run
      a command or commands on each item in a list. It takes an input list
      and a command name or block of commands, like this:
    <pre>
foreach [1 2 3] show
=&gt; 1
=&gt; 2
=&gt; 3
foreach [2 4 6]
  [ crt ?
    show (word &quot;created &quot; ? &quot; turtles&quot;) ]
=&gt; created 2 turtles
=&gt; created 4 turtles
=&gt; created 6 turtles
</pre>
    <p>
      In the block, the variable <a href=
      "dictionary.html#ques"><tt>?</tt></a> holds the current value from
      the input list.
    <p>
      Here are some more examples of <a href=
      "dictionary.html#foreach"><tt>foreach</tt></a>:
    <pre>
foreach [1 2 3] [ ask turtles [ fd ? ] ]
;; turtles move forward 6 patches
foreach [true false true true] [ ask turtles [ if ? [ fd 1 ] ] ]
;; turtles move forward 3 patches
</pre>
    <p>
      <a href="dictionary.html#map"><tt>map</tt></a> is similar to <a href=
      "dictionary.html#foreach"><tt>foreach</tt></a>, but it is a reporter.
      It takes an input list and a reporter name or reporter block. Note
      that unlike <a href="dictionary.html#foreach"><tt>foreach</tt></a>,
      the reporter comes first, like this:
    <pre>
show map round [1.2 2.2 2.7]
;; prints [1 2 3]
</pre>
    <p>
      <a href="dictionary.html#map"><tt>map</tt></a> reports a list
      containing the results of applying the reporter to each item in the
      input list. Again, use <a href="dictionary.html#ques"><tt>?</tt></a>
      to refer to the current item in the list.
    <p>
      Here are a couple more examples of <a href=
      "dictionary.html#map"><tt>map</tt></a>:
    <pre>
show map [? &lt; 0] [1 -1 3 4 -2 -10]
;; prints [false true false false true true]
show map [? * ?] [1 2 3]
;; prints [1 4 9]
</pre>
    <p>
      Besides <tt>map</tt> and <tt>foreach</tt>, other primitives for
      processing whole lists in a configurable way include <a href=
      "dictionary.html#filter"><tt>filter</tt></a>, <a href=
      "dictionary.html#reduce"><tt>reduce</tt></a>, and <a href=
      "dictionary.html#sort-by"><tt>sort-by</tt></a>.
    <p>
      These primitives aren't always the solution for every situation
      in which you want to operate on an entire list. In some situations,
      you may need to use some other technique such as a loop using
      <a href="dictionary.html#repeat"><tt>repeat</tt></a> or <a href=
      "dictionary.html#while"><tt>while</tt></a>, or a recursive procedure.
    <p>
      The blocks of code we're giving to <tt>map</tt> and
      <tt>foreach</tt> in these examples are actually <b>tasks</b>. Tasks
      are explained in more detail in <a href="#tasks">Tasks</a>, below.
    <p>
      <a name="variadic" id="variadic"><b>Varying number of inputs</b></a>
    <p>
      Some commands and reporters involving lists and strings may take a
      varying number of inputs. In these cases, in order to pass them a
      number of inputs other than their default, the primitive and its
      inputs must be surrounded by parentheses. Here are some examples:
    <pre>
show list 1 2
=&gt; [1 2]
show (list 1 2 3 4)
=&gt; [1 2 3 4]
show (list)
=&gt; []
</pre>
    <p>
      Note that each of these special commands has a default number of
      inputs for which no parentheses are required. The primitives which
      have this capability are <a href=
      "dictionary.html#list"><tt>list</tt></a>, <a href=
      "dictionary.html#word"><tt>word</tt></a>, <a href=
      "dictionary.html#sentence"><tt>sentence</tt></a>, <a href=
      "dictionary.html#map"><tt>map</tt></a>, and <a href=
      "dictionary.html#foreach"><tt>foreach</tt></a>.
    <p>
      <b>Lists of agents</b>
    <p>
      Earlier, we said that agentsets are always in random order, a
      different random order every time. If you need your agents to do
      something in a fixed order, you need to make a list of the agents
      instead.
    <p>
      There are two primitives that help you do this, <a href=
      "dictionary.html#sort"><tt>sort</tt></a> and <a href=
      "dictionary.html#sort-by"><tt>sort-by</tt></a>.
    <p>
      Both <a href="dictionary.html#sort"><tt>sort</tt></a> and <a href=
      "dictionary.html#sort-by"><tt>sort-by</tt></a> can take an agentset
      as input. The result is always a new list, containing the same agents
      as the agentset did, but in a particular order.
    <p>
      If you use <a href="dictionary.html#sort"><tt>sort</tt></a> on an
      agentset of turtles, the result is a list of turtles sorted in
      ascending order by <a href="dictionary.html#who"><tt>who</tt></a>
      number.
    <p>
      If you use <a href="dictionary.html#sort"><tt>sort</tt></a> on an
      agentset of patches, the result is a list of patches sorted
      left-to-right, top-to-bottom.
    <p>
      If you use <a href="dictionary.html#sort"><tt>sort</tt></a> on an
      agentset of links, the result is a list of links, sorted in ascending
      order first by <a href="dictionary.html#end1"><tt>end1</tt></a> then
      by <a href="dictionary.html#end2"><tt>end2</tt></a> any remaining
      ties are resolved by breed in the order they are declared in the Code
      tab.
    <p>
      If you need descending order instead, you can combine <a href=
      "dictionary.html#reverse"><tt>reverse</tt></a> with <a href=
      "dictionary.html#sort"><tt>sort</tt></a>, for example <tt>reverse
      sort turtles</tt>.
    <p>
      If you want your agents to be ordered by some other criterion than
      the standard ones <a href="dictionary.html#sort"><tt>sort</tt></a>
      uses, you'll need to use <a href=
      "dictionary.html#sort-by"><tt>sort-by</tt></a> instead.
    <p>
      Here's an example:
    <pre>
sort-by [[size] of ?1 &lt; [size] of ?2] turtles
</pre>
    <p>
      This returns a list of turtles sorted in ascending order by their
      turtle variable <a href="dictionary.html#size"><tt>size</tt></a>.
    <p>
      <b>Asking a list of agents</b>
    <p>
      Once you have a list of agents, you might want to ask them each to do
      something. To do this, use the <a href=
      "dictionary.html#foreach"><tt>foreach</tt></a> and <a href=
      "dictionary.html#ask"><tt>ask</tt></a> commands in combination, like
      this:
    <pre>
foreach sort turtles [
  ask ? [
    ...
  ]
]
</pre>
    <p>
      This will ask each turtle in ascending order by who number.
      Substitute &quot;patches&quot; for &quot;turtles&quot; to ask patches
      in left-to-right, top-to-bottom order.
    <p>
      Note that you can't use <a href=
      "dictionary.html#ask"><tt>ask</tt></a> directly on a list of turtles.
      <a href="dictionary.html#ask"><tt>ask</tt></a> only works with
      agentsets and single agents.
    <p>
      <a name="list-performance" id="list-performance"></a><b>Performance
      of lists</b>
    <p>
      The data structure underlying NetLogo's lists is a sophisticated
      tree-based data structure on which most operations run in
      near-constant time. That includes <tt>fput</tt>, <tt>lput</tt>,
      <tt>butfirst</tt>, <tt>butlast</tt>, <tt>length</tt>, <tt>item</tt>,
      and <tt>replace-item</tt>.
    <p>
      One exception to the fast-performance rule is that concatenating two
      lists with <tt>sentence</tt> requires traversing and copying the
      whole second list. (This may be fixed in a future version.)
    <p>
      Technically, &quot;near-constant time&quot; is actually logarithmic
      time, proportional to the depth of the underlying tree, but these
      trees have large nodes and a high branching factor, so they are never
      more than a few levels deep. This means that changes can be made in
      at most a few steps. The trees are immutable, but they share
      structure with each other, so the whole tree doesn't need to be
      copied to make a changed version.
    <p>
      The actual data structure used is the immutable Vector class from the
      Scala collections library. These are 32-wide <a href=
      "http://en.wikipedia.org/wiki/Hash_array_mapped_trie">hash array
      mapped tries</a>, as implemented by Tiark Rompf, based in part on
      work by Phil Bagwell and Rich Hickey.
    <h2>
      <a name="math" id="math">Math</a>
    </h2>
    <p>
      All numbers in NetLogo are stored internally as double precision
      floating point numbers, as defined in the IEEE 754 standard. They are
      64 bit numbers consisting of one sign bit, an 11-bit exponent, and a
      52-bit mantissa. See the IEEE 754 standard for details.
    <p>
      An &quot;integer&quot; in NetLogo is simply a number that happens to
      have no fractional part. No distinction is made between 3 and 3.0;
      they are the same number. (This is the same as how most people use
      numbers in everyday contexts, but different from some programming
      languages. Some languages treat integers and floating point numbers
      as distinct types.)
    <p>
      Integers are always printed by NetLogo without the trailing
      &quot;.0&quot;:
    <pre>
show 1.5 + 1.5
observer: 3
</pre>
    <p>
      If a number with a fractional part is supplied in a context where an
      integer is expected, the fractional part is simply discarded. So for
      example, <tt>crt 3.5</tt> creates three turtles; the extra 0.5 is
      ignored.
    <p>
      The range of integers is +/-9007199254740992 (2^53, about 9
      quadrillion). Calculations that exceed this range will not cause
      runtime errors, but precision will be lost when the least significant
      (binary) digits are rounded off in order fit the number into 64 bits.
      With very large numbers, this rounding can result in imprecise
      answers which may be surprising:
    <pre>
show 2 ^ 60 + 1 = 2 ^ 60
=&gt; true
</pre>
    <p>
      Calculations with smaller numbers can also produce surprising results
      if they involve fractional quantities, since not all fractions can be
      precisely represented and roundoff may occur. For example:
    <pre>
show 1 / 6 + 1 / 6 + 1 / 6 + 1 / 6 + 1 / 6 + 1 / 6
=&gt; 0.9999999999999999
show 1 / 9 + 1 / 9 + 1 / 9 + 1 / 9 + 1 / 9 + 1 / 9 + 1 / 9 + 1 / 9 + 1 / 9
=&gt; 1.0000000000000002
</pre>
    <p>
      Any operation which produces the special quantities
      &quot;infinity&quot; or &quot;not a number&quot; will cause a runtime
      error.
    <p>
      <b>Scientific notation</b>
    <p>
      Very large or very small floating point numbers are displayed by
      NetLogo using &quot;scientific notation&quot;. Examples:
    <pre>
show 0.000000000001
=&gt; 1.0E-12
show 50000000000000000000
=&gt; 5.0E19
</pre>
    <p>
      Numbers in scientific notation are distinguished by the presence of
      the letter E (for &quot;exponent&quot;). It means &quot;times ten to
      the power of&quot;, so for example, 1.0E-12 means 1.0 times 10 to the
      -12 power:
    <pre>
show 1.0 * 10 ^ -12
=&gt; 1.0E-12
</pre>
    <p>
      You can also use scientific notation yourself in NetLogo code:
    <pre>
show 3.0E6
=&gt; 3000000
show 8.123456789E6
=&gt; 8123456.789
show 8.123456789E7
=&gt; 8.123456789E7
show 3.0E16
=&gt; 3.0E16
show 8.0E-3
=&gt; 0.0080
show 8.0E-4
=&gt; 8.0E-4
</pre>
    <p>
      These examples show that numbers with fractional parts are displayed
      using scientific notation if the exponent is less than -3 or greater
      than 6. Numbers outside of NetLogo's integer range of
      -9007199254740992 to 9007199254740992 (+/-2^53) are also always shown
      in scientific notation:
    <pre>
show 2 ^ 60
=&gt; 1.15292150460684698E18
</pre>
    <p>
      When entering a number, the letter E may be either upper or
      lowercase. When printing a number, NetLogo always uses an uppercase
      E:
    <pre>
show 4.5e20
=&gt; 4.5E20
</pre>
    <p>
      <b>Floating point accuracy</b>
    <p>
      Because numbers in NetLogo are subject to the limitations of how
      floating point numbers are represented in binary, you may get answers
      that are slightly inaccurate. For example:
    <pre>
show 0.1 + 0.1 + 0.1
=&gt; 0.30000000000000004
show cos 90
=&gt; 6.123233995736766E-17
</pre>
    <p>
      This is an inherent issue with floating point arithmetic; it occurs
      in all programming languages that use floating point numbers.
    <p>
      If you are dealing with fixed precision quantities, for example
      dollars and cents, a common technique is to use only integers (cents)
      internally, then divide by 100 to get a result in dollars for
      display.
    <p>
      If you must use floating point numbers, then in some situations you
      may need to replace a straightforward equality test such as <tt>if x
      = 1 [ ... ]</tt> with a test that tolerates slight imprecision, for
      example <tt>if abs (x - 1) &lt; 0.0001 [ ... ]</tt>.
    <p>
      Also, the <a href="dictionary.html#precision"><tt>precision</tt></a>
      primitive is handy for rounding off numbers for display purposes.
      NetLogo monitors round the numbers they display to a configurable
      number of decimal places, too.
    <h2>
      <a name="random" id="random">Random numbers</a>
    </h2>
    <p>
      The random numbers used by NetLogo are what is called
      &quot;pseudo-random&quot;. (This is typical in computer programming.)
      That means they appear random, but are in fact generated by a
      deterministic process. &quot;Deterministic&quot; means that you get
      the same results every time, if you start with the same random
      &quot;seed&quot;. We'll explain in a minute what we mean by
      &quot;seed&quot;.
    <p>
      In the context of scientific modeling, pseudo-random numbers are
      actually desirable. That's because it's important that a
      scientific experiment be reproducible -- so anyone can try it
      themselves and get the same result that you got. Since NetLogo uses
      pseudo-random numbers, the &quot;experiments&quot; that you do with
      it can be reproduced by others.
    <p>
      Here's how it works. NetLogo's random number generator can be
      started with a certain seed value, which must be an integer in the
      range -2147483648 to 2147483647. Once the generator has been
      &quot;seeded&quot; with the <tt><a href=
      "dictionary.html#random-seed">random-seed</a></tt> command, it always
      generates the same sequence of random numbers from then on. For
      example, if you run these commands:
    <pre>
random-seed 137
show random 100
show random 100
show random 100
</pre>
    <p>
      You will always get the numbers 79, 89, and 61 in that order.
    <p>
      Note, however, that you're only guaranteed to get those same
      numbers if you're using the same version of NetLogo. Sometimes
      when we make a new version of NetLogo the random number generator
      changes. (Presently, we use a generator known as the Mersenne
      Twister.)
    <p>
      To create a number suitable for seeding the random number generator,
      use the <tt><a href="dictionary.html#new-seed">new-seed</a></tt>
      reporter. <a href="dictionary.html#new-seed"><tt>new-seed</tt></a>
      creates a seed, evenly distributed over the space of possible seeds,
      based on the current date and time. It never reports the same seed
      twice in a row.
    <blockquote>
      <p>
        <b>Code Example:</b> Random Seed Example
      </blockquote>
    <p>
      If you don't set the random seed yourself, NetLogo sets it to a
      value based on the current date and time. There is no way to find out
      what random seed it chose, so if you want your model run to be
      reproducible, you must set the random seed yourself ahead of time.
    <p>
      The NetLogo primitives with &quot;random&quot; in their names
      (random, random-float, and so on) aren't the only ones that use
      pseudo-random numbers. Many other operations also make random
      choices. For example, agentsets are always in random order, <a href=
      "dictionary.html#one-of"><tt>one-of</tt></a> and <a href=
      "dictionary.html#n-of"><tt>n-of</tt></a> choose agents randomly, the
      <a href="dictionary.html#sprout"><tt>sprout</tt></a> command creates
      turtles with random colors and headings, and the <a href=
      "dictionary.html#downhill"><tt>downhill</tt></a> reporter chooses a
      random patch when there's a tie. All of these random choices are
      governed by the random seed as well, so model runs can be
      reproducible.
    <p>
      In addition to the uniformly distributed random integers and floating
      point numbers generated by <a href=
      "dictionary.html#random"><tt>random</tt></a> and <a href=
      "dictionary.html#random-float"><tt>random-float</tt></a>, NetLogo
      also offers several other random distributions. See the dictionary
      entries for <a href=
      "dictionary.html#random-normal"><tt>random-normal</tt></a>, <a href=
      "dictionary.html#random-poisson"><tt>random-poisson</tt></a>,
      <a href="dictionary.html#random-exponential"><tt>random-exponential</tt></a>,
      and <a href="dictionary.html#random-gamma"><tt>random-gamma</tt></a>.
    <h3>
      Auxiliary generator
    </h3>
    <p>
      Code run by buttons or from the command center uses the main random
      number generator.
    <p>
      Code in monitors uses an auxiliary random generator, so even if a
      monitor does a calculation that uses random numbers, the outcome of
      the model is not affected. The same is true of code in sliders.
    <h3>
      Local randomness
    </h3>
    <p>
      You may want to explicitly specify that a section of code does not
      affect the state of the main random generator, so the outcome of the
      model is not affected. The <a href=
      "dictionary.html#with-local-randomness"><tt>with-local-randomness</tt></a>
      command is provided for this purpose. See its entry in the NetLogo
      Dictionary for more information.
    <h2>
      <a name="shapes" id="shapes">Turtle shapes</a>
    </h2>
    <p>
      In NetLogo, turtle shapes are vector shapes. They are built up from
      basic geometric shapes; squares, circles, and lines, rather than a
      grid of pixels. Vector shapes are fully scalable and rotatable.
      NetLogo caches bitmap images of vector shapes size 1, 1.5, and 2 in
      order to speed up execution.
    <p>
      A turtle's shape is stored in its <a href=
      "dictionary.html#shape"><tt>shape</tt></a> variable and can be set
      using the <a href="dictionary.html#set"><tt>set</tt></a> command.
    <p>
      New turtles have a shape of &quot;default&quot;. The <a href=
      "dictionary.html#set-default-shape"><tt>set-default-shape</tt></a>
      primitive is useful for changing the default turtle shape to a
      different shape, or having a different default turtle shape for each
      breed of turtle.
    <p>
      The <a href="dictionary.html#shapes"><tt>shapes</tt></a> primitive
      reports a list of currently available turtle shapes in the model.
      This is useful if, for example, you want to assign a random shape to
      a turtle:
    <pre>
ask turtles [ set shape one-of shapes ]
</pre>
    <p>
      Use the Turtle Shapes Editor to create your own turtle shapes, or to
      add shapes to your model from our shapes library, or to transfer
      shapes between models. For more information, see the Shapes Editor
      <a href="shapes.html">section</a> of this manual.
    <p>
      The thickness of the lines used to draw the vector shapes can be
      controlled by the <a href=
      "dictionary.html#set-line-thickness"><code>__set-line-thickness</code></a>
      primitive.
    <blockquote>
      <p>
        <b>Code Examples:</b> Breeds and Shapes Example, Shape Animation
        Example
      </blockquote>
    <h2>
      <a name="link-shapes" id="link-shapes">Link shapes</a>
    </h2>
    <p>
      Link Shapes are similar to turtle shapes, only you use the Link Shape
      Editor to create and edit them. Link shapes consist of between 0 and
      3 lines which can have different patterns and a direction indicator
      that is composed of the same elements as turtle shapes. Links also
      have a <a href="dictionary.html#shape"><tt>shape</tt></a> variable
      that can be set to any link shape that is in the model. By default
      links have the &quot;default&quot; shape, though you can change that
      using <a href=
      "dictionary.html#set-default-shape"><tt>set-default-shape</tt></a>.
      The <a href="dictionary.html#link-shapes"><tt>link-shapes</tt></a>
      reporter reports all the link shapes included in the current model.
    <p>
      The thickness of the lines in the link shape is controlled by the
      <a href="dictionary.html#thickness"><tt>thickness</tt></a> link
      variable.
    <h2>
      <a name="updates" id="updates">View updates</a>
    </h2>
    <p>
      The &quot;view&quot; in NetLogo lets you see the agents in your model
      on your computer's screen. As your agents move and change, you
      see them moving and changing in the view.
    <p>
      Of course, you can't really see your agents directly. The view is
      a picture that NetLogo paints, showing you how your agents look at a
      particular instant. Once that instant passes and your agents move and
      change some more, that picture needs to be repainted to reflect the
      new state of the world. Repainting the picture is called
      &quot;updating&quot; the view.
    <p>
      When does the view get updated? This section discusses how NetLogo
      decides when to update the view, and how you can influence when it
      gets updated.
    <p>
      NetLogo offers two updates modes, &quot;continuous&quot; updates and
      &quot;tick-based&quot; updates. You can switch between NetLogo's
      two view update modes using a popup menu at the top of the Interface
      tab.
    <p>
      Continuous updates are the default when you start up NetLogo or start
      a new model. Nearly every model in our Models Library, however, uses
      tick-based updates.
    <p>
      Continuous updates are simplest, but tick-based updates give you more
      control over when and how often updates happen.
    <p>
      It's important exactly when an update happens, because when
      updates happen determines what you see on the screen. If an update
      comes at an unexpected time, you may see something unexpected --
      perhaps something confusing or misleading.
    <p>
      It's also important how often updates happen, because updates
      take time. The more time NetLogo spends updating the view, the slower
      your model will run. With fewer updates, your model runs faster.
    <h3>
      Continuous updates
    </h3>
    <p>
      Continuous updates are very simple. With continuous updates, NetLogo
      updates the view a certain number of times per second -- by default,
      30 times a second when the speed slider is in the default, middle
      setting.
    <p>
      If you move the speed slider to a slower setting, NetLogo will update
      more than 30 times a second, effectively slowing down the model. On a
      faster setting, NetLogo will update less than 30 times a second. On
      the fastest setting, updates will be separated by several seconds.
    <p>
      At extremely slow settings, NetLogo will be updating so often that
      you will see your agents moving (or changing color, etc.) one at a
      time.
    <p>
      If you need to temporarily shut off continuous updates, use the
      <a href="dictionary.html#no-display"><tt>no-display</tt></a> command.
      The <a href="dictionary.html#display"><tt>display</tt></a> command
      turns updates back on, and also forces an immediate update (unless
      the user is fast-forwarding the model using the speed slider).
    <h3>
      Tick-based updates
    </h3>
    <p>
      As discussed above in the <a href="#ticks">Tick Counter</a> section,
      in many NetLogo models, time passes in discrete steps, called
      &quot;ticks&quot;. Typically, you want the view to update once per
      tick, between ticks. That's the default behavior with tick-based
      updates.
    <p>
      If you want additional view updates, you can force an update using
      the <a href="dictionary.html#display"><tt>display</tt></a> command.
      (The update may be skipped if the user is fast-forwarding the model
      using the speed slider.)
    <p>
      You don't have to use the tick counter to use tick-based updates.
      If the tick counter never advances, the view will update only when
      you use the <a href="dictionary.html#display"><tt>display</tt></a>
      command.
    <p>
      If you move the speed slider to a fast enough setting, eventually
      NetLogo will skip some of the updates that would ordinarily have
      happened. Moving the speed slider to a slower setting doesn't
      cause additional updates; rather, it makes NetLogo pause after each
      update. The slower the setting, the longer the pause.
    <p>
      Even under tick-based updates, the view also updates whenever a
      button in the interface pops up (both once and forever buttons) and
      when a command entered in the Command Center finishes. So it's
      not necessary to add the <a href=
      "dictionary.html#display"><tt>display</tt></a> command to once
      buttons that don't advance the tick counter. Many forever buttons
      that don't advance the tick counter do need to use the <a href=
      "dictionary.html#display"><tt>display</tt></a> command. An example in
      the Models Library is the Life model (under Computer Science -&gt;
      Cellular Automata). The forever buttons that let the user draw in the
      view use the <a href="dictionary.html#display"><tt>display</tt></a>
      command so the user can see what they are drawing, even though the
      tick counter is not advancing.
    <h3>
      Choosing a mode
    </h3>
    <p>
      Advantages of tick-based updates over continuous updates include:
    <ol>
      <li>Consistent, predictable view update behavior which does not vary
      from computer to computer or from run to run.
      <li>Continuous updates can confuse the user of your model by letting
      them see model states they aren't supposed to see, which may be
      misleading.
      <li>Increased speed. Updating the view takes time, so if one update
      per tick is enough, then enforcing there is only one update per tick
      will make your model faster.
      <li>Since <tt>setup</tt> buttons don't advance the tick counter,
      they are unaffected by the speed slider; this is normally the desired
      behavior.
      </ol>
    <p>
      As mentioned above, most models in our Models Library now uses
      tick-based updates.
    <p>
      Continuous updates are useful for models in which execution is not
      divided into short, discrete phases. An example in the Models Library
      is Termites. (See also, however, the State Machine Example model,
      which shows how to re-code Termites using ticks.)
    <p>
      Even for models that would normally be set to tick-based updates, it
      may be useful to switch to continuous updates temporarily for
      debugging purposes. Seeing what's going on within a tick, instead
      of only seeing the end result of a tick, could help with
      troubleshooting. After switching to continuous updates, you may want
      to use the speed slider to slow the model down until you see your
      agents moving one at a time. Don't forget to change back to
      tick-based updates when you are done, as the choice of update mode is
      saved with the model.
    <h3>
      Frame rate
    </h3>
    <p>
      One of the model settings in NetLogo's &quot;Settings...&quot;
      dialog is &quot;Frame rate&quot; which defaults to 30 frames per
      second.
    <p>
      The frame rate setting affects both continuous updates and tick-based
      updates.
    <p>
      With continuous updates, the setting directly determines the
      frequency of updates.
    <p>
      With tick-based updates, the setting is a <i>ceiling</i> on how many
      updates per second you get. If the frame rate is 30, then NetLogo
      will ensure that the model never runs faster than that when the speed
      slider is in the default position. If any frame takes less than 1/30
      of a second to compute and display, NetLogo will pause and wait until
      the full 1/30 of a second has passed before continuing.
    <p>
      The frame rate settings lets you set what you consider to be a normal
      speed for your model. Then you, or the user of your model, can use
      the speed slider to temporarily get a faster or slower speed.
    <h2>
      <a name="plotting" id="plotting">Plotting</a>
    </h2>
    <p>
      NetLogo's plotting features let you create plots to help you
      understand what's going on in your model.
    <p>
      Before you can plot, you need to create one or more plots in the
      Interface tab. For more information on using and editing plots in the
      Interface tab, see the Interface Guide.
    <h4>
      Plotting points
    </h4>
    <p>
      The two basic commands for actually plotting things are
      <code>plot</code> and <code>plotxy</code>.
    <p>
      With <code>plot</code> you need only specify the y value you want
      plotted. The x value will automatically be 0 for the first point you
      plot, 1 for the second, and so on. (That's if the plot pen's
      &quot;interval&quot; is the default value of 1; you can change the
      interval.)
    <p>
      The <code>plot</code> command is especially handy when you want your
      model to plot a new point at every time step. Example:
    <pre>
<code>plot count turtles</code>
</pre>
    <p>
      If you need to specify both the x and y values of the point you want
      plotted, then use <code>plotxy</code> instead. This example assumes
      that a global variable called <code>time</code> exists:
    <pre>
<code>plotxy time count-turtles</code>
</pre>
    <h4>
      Plot commands
    </h4>
    <p>
      Each plot and its pens have setup and update code fields that may
      contain commands (usually containing <code>plot</code> or
      <code>plotxy</code>). These commands are run automatically triggered
      by other commands in NetLogo.
    <p>
      Plot setup commands and pen setup commands are run when the either
      <code>reset-ticks</code> or <code>setup-plots</code> commands are
      run. If the <code>stop</code> command is run in the body of the plot
      setup commands then the pen setup commands will not run.
    <p>
      Plot update commands and pen update commands are run when the either
      <code>reset-ticks</code>, <code>tick</code> or
      <code>update-plots</code> commands are run. If the <code>stop</code>
      command is run in the body of the plot update commands then the pen
      update commands will not run.
    <p>
      Here are the four commands that trigger plotting explained in more
      detail.
    <ul>
      <li>
        <code>setup-plots</code> executes commands for one plot at a time.
        For each plot, the plot's setup commands are executed. If the
        stop command is not encountered while running those commands, then
        each of the plot's pens will have their setup code executed.
      <li>
        <code>update-plots</code> is very similar to
        <code>setup-plots</code>. For each plot, the plot's update
        commands are executed. If the stop command is not encountered while
        running those commands, then each of the plot's pens will have
        their update code executed.
      <li>
        <code>tick</code> is exactly the same as <code>update-plots</code>
        except that the tick counter is incremented before the the plot
        commands are executed.
      <li>
        <code>reset-ticks</code> first resets the tick counter to 0, and
        then does the equivalent of <code>setup-plots</code> followed by
        <code>update-plots</code>.
      </ul>
    <p>
      A typical model will use <code>reset-ticks</code> and
      <code>tick</code> like so:
    <pre>
<code>to setup
  clear-all
  ...
  reset-ticks
end

to go
  ...
  tick
end</code>
</pre>
    <p>
      Note that in this example we plot from both the <code>setup</code>
      and <code>go</code> procedures (because <code>reset-ticks</code> runs
      plot setup and plot update commands). We do this because we want our
      plot to include the initial state of the system at the end of
      <code>setup</code>. We plot at the end of the <code>go</code>
      procedure, not the beginning, because we want the plot always to be
      up to date after the go button stops.
    <p>
      Models that don't use ticks but still want to do plotting will
      instead use <code>setup-plots</code> and <code>update-plots</code>.
      In the previous code, replace <code>reset-ticks</code> with
      <code>setup-plots update-plots</code> and replace tick with
      <code>update-plots</code>.
    <blockquote>
      <p>
        Code Example: Plotting Example
      </blockquote>
    <h4>
      Other kinds of plots
    </h4>
    <p>
      By default, NetLogo plot pens plot in line mode, so that the points
      you plot are connected by a line.
    <p>
      If you want to move the pen without plotting, you can use the
      <code>plot-pen-up</code> command. After this command is issued, the
      <code>plot</code> and <code>plotxy</code> commands move the pen but
      do not actually draw anything. Once the pen is where you want it, use
      <code>plot-pen-down</code> to put the pen back down.
    <p>
      If you want to plot individual points instead of lines, or you want
      to draw bars instead of lines or points, you need to change the plot
      pen's &quot;mode&quot;. Three modes are available: line, bar, and
      point. Line is the default mode.
    <p>
      Normally, you change a pen's mode by editing the plot. This
      changes the pen's default mode. It's also possible to change
      the pen's mode temporarily using the <code>set-plot-pen-mode
      command</code>. That command takes a number as input: 0 for line, 1
      for bar, 2 for point.
    <h4>
      Histograms
    </h4>
    <p>
      A histogram is a special kind of plot that measures how frequently
      certain values, or values in certain ranges, occur in a collection of
      numbers that arise in your model.
    <p>
      For example, suppose the turtles in your model have an age variable.
      You could create a histogram of the distribution of ages among your
      turtles with the histogram command, like this:
    <pre>
<code>histogram [age] of turtles</code>
</pre>
    <p>
      The numbers you want to histogram don't have to come from an
      agentset; they could be any list of numbers.
    <p>
      Note that using the histogram command doesn't automatically
      switch the current plot pen to bar mode. If you want bars, you have
      to set the plot pen to bar mode yourself. (As we said before, you can
      change a pen's default mode by editing the plot in the Interface
      tab.)
    <p>
      The width of the bars in a histogram is controlled by the plot
      pen's interval. You can set a plot pen's default interval by
      editing the plot in the Interface tab. You can also change the
      interval temporarily with the <code>set-plot-pen-interval</code>
      command or the <code>set-histogram-num-bars</code>. If you use the
      latter command, NetLogo will set the interval appropriately so as to
      fit the specified number of bars within the plot's current x
      range.
    <blockquote>
      <p>
        Code Example: Histogram Example
      </blockquote>
    <h4>
      Clearing and resetting
    </h4>
    <p>
      You can clear the current plot with the <code>clear-plot</code>
      command, or clear every plot in your model with
      <code>clear-all-plots</code>. The <code>clear-all command</code> also
      clears all plots, in addition to clearing everything else in your
      model.
    <p>
      If you want to remove only the points that a particular pen has
      drawn, use <code>plot-pen-reset</code>.
    <p>
      When a whole plot is cleared, or when a pen is reset, that
      doesn't just remove the data that has been plotted. It also
      restores the plot or pen to its default settings, as they were
      specified in the Interface tab when the plot was created or last
      edited. Therefore, the effects of such commands as
      <code>set-plot-x-range</code> and <code>set-plot-pen-color</code> are
      only temporary.
    <h4>
      Ranges and auto scaling
    </h4>
    <p>
      The default x and y ranges for a plot are fixed numbers, but they can
      be changed at setup time or as the model runs.
    <p>
      To change the ranges at any time, use <code>set-plot-x-range</code>
      and <code>set-plot-y-range</code>. Or, you can let the ranges grow
      automatically. Either way, when the plot is cleared the ranges will
      return to their default values.
    <p>
      By default, all NetLogo plots have the auto scaling feature enabled.
      This means that if the model tries to plot a point which is outside
      the current displayed range, the range of the plot will grow along
      one or both axes so that the new point is visible.
    <p>
      In the hope that the ranges won't have to change every time a new
      point is added, when the ranges grow they leave some extra room: 25%
      if growing horizontally, 10% if growing vertically.
    <p>
      If you want to turn off this feature, edit the plot and uncheck the
      Auto Scale? checkbox. At present, it is not possible to enable or
      disable this feature only on one axis; it always applies to both
      axes.
    <h4>
      Using a Legend
    </h4>
    <p>
      You can show the legend of a plot by checking the &quot;Show
      legend&quot; checkbox in the edit dialog. If you don't want a
      particular pen to show up in the legend you can uncheck the
      &quot;Show in Legend&quot; checkbox for that pen also in the advanced
      plot pen settings (the advanced plot pen settings can be opened by
      clicking the pencil button for that pen in the plot pens table in the
      plot edit dialog).
    <h4>
      Temporary plot pens
    </h4>
    <p>
      Most plots can get along with a fixed number of pens. But some plots
      have more complex needs; they may need to have the number of pens
      vary depending on conditions. In such cases, you can make
      &quot;temporary&quot; plot pens from code and then plot with them.
      These pens are called &quot;temporary&quot; because they vanish when
      the plot is cleared (by the <code>clear-plot</code>,
      <code>clear-all-plots</code>, or <code>clear-all</code> commands).
    <p>
      To create a temporary plot pen, use the
      <code>create-temporary-plot-pen</code> command. Typically, this would
      be done in the Code tab, but it is also possible to use this command
      from plot setup or plot update code (in the edit dialog). By default,
      the new pen is down, is black in color, has an interval of 1, and
      plots in line mode. Commands are available to change all of these
      settings; see the Plotting section of the NetLogo Dictionary.
    <p>
      Before you can use the pen, you'll have to use the use the
      <code>set-current-plot</code> and <code>set-current-plot-pen</code>
      commands. These are explained in the next section.
    <h4>
      set-current-plot and set-current-plot-pen
    </h4>
    <p>
      Before NetLogo 5, it was not possible to put plot commands in the
      plot itself. All of the plot code was written in the Code tab with
      the rest of the code. For backwards compatibility, and for temporary
      plot pens, this is still supported. Models in previous versions of
      NetLogo (and those using temporary plot pens) have to explicitly
      state which plot is the current plot with the
      <code>set-current-plot</code> command and which pen is the current
      pen with the <code>set-current-plot-pen</code> command.
    <p>
      To set the current plot use the <code>set-current-plot</code> command
      with the name of the plot enclosed in double quotes, like this:
    <pre>
<code>set-current-plot &quot;Distance vs. Time&quot;</code>
</pre>
    <p>
      The name of the plot must be exactly as you typed it when you created
      the plot. Note that later if you change the name of the plot,
      you'll also have to update the <code>set-current-plot</code>
      calls in your model to use the new name. (Copy and paste can be
      helpful here.)
    <p>
      For a plot with multiple pens, you can manually specify which pen you
      want to plot with. If you don't specify a pen, plotting will take
      place with the first pen in the plot. To plot with a different pen,
      the <code>set-current-plot-pen</code> command was used with the name
      of the pen enclosed in double quotes, like this:
    <pre>
<code>set-current-plot-pen &quot;distance&quot;</code>
</pre>
    <p>
      Once the current pen is set, then commands like <code>plot count
      turtles</code> can be executed for that pen.
    <p>
      Older models with plots usually had their own
      <code>do-plotting</code> procedure that looked something like this:
    <pre>
<code>to do-plotting
  set-current-plot &quot;populations&quot;
  set-current-plot-pen &quot;sheep&quot;
  plot count sheep
  set-current-plot-pen &quot;wolves&quot;
  plot count wolves

  set-current-plot &quot;next plot&quot;
  ...
end</code>
</pre>
    <p>
      Once again, this is no longer necessary in NetLogo 5, unless you are
      using temporary plot pens.
    <h4>
      Conclusion
    </h4>
    <p>
      Not every aspect of NetLogo's plotting system has been explained
      here. See the Plotting section of the NetLogo Dictionary for
      information on additional commands and reporters related to plotting.
    <p>
      Many of the Sample Models in the Models Library illustrate various
      advanced plotting techniques. Also check out the following code
      examples:
    <blockquote>
      <p>
        Code Examples: Plot Axis Example, Plot Smoothing Example, Rolling
        Plot Example
      </blockquote>
    <h2>
      <a name="strings" id="strings">Strings</a>
    </h2>
    <p>
      Strings may contain any Unicode characters.
    <p>
      To input a constant string in NetLogo, surround it with double
      quotes.
    <p>
      The empty string is written by putting nothing between the quotes,
      like this: <tt>&quot;&quot;</tt>.
    <p>
      Most of the list primitives work on strings as well:
    <pre>
but-first &quot;string&quot; =&gt; &quot;tring&quot;
but-last &quot;string&quot; =&gt; &quot;strin&quot;
empty? &quot;&quot; =&gt; true
empty? &quot;string&quot; =&gt; false
first &quot;string&quot; =&gt; &quot;s&quot;
item 2 &quot;string&quot; =&gt; &quot;r&quot;
last &quot;string&quot; =&gt; &quot;g&quot;
length &quot;string&quot; =&gt; 6
member? &quot;s&quot; &quot;string&quot; =&gt; true
member? &quot;rin&quot; &quot;string&quot; =&gt; true
member? &quot;ron&quot; &quot;string&quot; =&gt; false
position &quot;s&quot; &quot;string&quot; =&gt; 0
position &quot;rin&quot; &quot;string&quot; =&gt; 2
position &quot;ron&quot; &quot;string&quot; =&gt; false
remove &quot;r&quot; &quot;string&quot; =&gt; &quot;sting&quot;
remove &quot;s&quot; &quot;strings&quot; =&gt; &quot;tring&quot;
replace-item 3 &quot;string&quot; &quot;o&quot; =&gt; &quot;strong&quot;
reverse &quot;string&quot; =&gt; &quot;gnirts&quot;
</pre>
    <p>
      A few primitives are specific to strings, such as <a href=
      "dictionary.html#is-string"><tt>is-string?</tt></a>, <a href=
      "dictionary.html#substring"><tt>substring</tt></a>, and <a href=
      "dictionary.html#word"><tt>word</tt></a>:
    <pre>
is-string? &quot;string&quot; =&gt; true
is-string? 37 =&gt; false
substring &quot;string&quot; 2 5 =&gt; &quot;rin&quot;
word &quot;tur&quot; &quot;tle&quot; =&gt; &quot;turtle&quot;
</pre>
    <p>
      Strings can be compared using the =, !=, &lt;, &gt;, &lt;=, and &gt;=
      operators.
    <p>
      If you need to embed a special character in a string, use the
      following escape sequences:
    <ul>
      <li>
        <tt>\n</tt> = newline
      <li>
        <tt>\t</tt> = tab
      <li>
        <tt>\&quot;</tt> = double quote
      <li>
        <tt>\\</tt> = backslash
      </ul>
    <h2>
      <a name="output" id="output">Output</a>
    </h2>
    <p>
      This section is about output to the screen. Output to the screen can
      also be later saved to a file using the <a href=
      "dictionary.html#export-output"><tt>export-output</tt></a> command.
      If you need a more flexible method of writing data to external files,
      see the next section, <a href="#fileio">File I/O</a>.
    <p>
      The basic commands for generating output to the screen in NetLogo are
      <a href="dictionary.html#print"><tt>print</tt></a>, <a href=
      "dictionary.html#show"><tt>show</tt></a>, <a href=
      "dictionary.html#type"><tt>type</tt></a>, and <a href=
      "dictionary.html#write"><tt>write</tt></a>. These commands send their
      output to the Command Center.
    <p>
      For full details on these four commands, see their entries in the
      NetLogo Dictionary. Here is how they are typically used:
    <ul>
      <li>
        <a href="dictionary.html#print"><tt>print</tt></a> is useful in
        most situations.
      <li>
        <a href="dictionary.html#show"><tt>show</tt></a> lets you see which
        agent is printing what.
      <li>
        <a href="dictionary.html#type"><tt>type</tt></a> lets you print
        several things on the same line.
      <li>
        <a href="dictionary.html#write"><tt>write</tt></a> lets you print
        values in a format which can be read back in using <a href=
        "dictionary.html#file-read"><tt>file-read</tt></a>.
      </ul>
    <p>
      A NetLogo model may optionally have an &quot;output area&quot; in its
      Interface tab, separate from the Command Center. To send output there
      instead of the Command Center, use the <a href=
      "dictionary.html#output-print"><tt>output-print</tt></a>, <a href=
      "dictionary.html#output-show"><tt>output-show</tt></a>, <a href=
      "dictionary.html#output-type"><tt>output-type</tt></a>, and <a href=
      "dictionary.html#output-write"><tt>output-write</tt></a> commands.
    <p>
      The output area can be cleared with the <a href=
      "dictionary.html#clear-output"><tt>clear-output</tt></a> command and
      saved to a file with <a href=
      "dictionary.html#export-output"><tt>export-output</tt></a>. The
      contents of the output area will be saved by the <a href=
      "dictionary.html#export-world"><tt>export-world</tt></a> command. The
      <a href="dictionary.html#import-world"><tt>import-world</tt></a>
      command will clear the output area and set its contents to the value
      in imported world file. It should be noted that large amounts of data
      being sent to the output area can increase the size of your exported
      worlds.
    <p>
      If you use <a href=
      "DICTIONARY.HTML#output-print"><tt>output-print</tt></a>, <a href=
      "dictionary.html#output-show"><tt>output-show</tt></a>, <a href=
      "dictionary.html#output-type"><tt>output-type</tt></a>, <a href=
      "dictionary.html#output-write"><tt>output-write</tt></a>, <a href=
      "dictionary.html#clear-output"><tt>clear-output</tt></a>, or <a href=
      "dictionary.html#export-output"><tt>export-output</tt></a> in a model
      which does not have a separate output area, then the commands apply
      to the output portion of the Command Center.
    <h2>
      <a name="fileio" id="fileio">File I/O</a>
    </h2>
    <p>
      In NetLogo, there is a set of primitives that give you the power to
      interact with outside files. They all begin with the prefix
      <b>file-</b>.
    <p>
      There are two main modes when dealing with files: reading and
      writing. The difference is the direction of the flow of data. When
      you are reading in information from a file, data that is stored in
      the file flows into your model. On the other hand, writing allows
      data to flow out of your model and into a file.
    <p>
      When a NetLogo model runs as an applet within a web browser, it will
      only be able to read data from files which are in the same directory
      on the server as the model file. Applets cannot write to any files.
    <p>
      When working with files, always begin by using the primitive <a href=
      "dictionary.html#file-open"><tt>file-open</tt></a>. This specifies
      which file you will be interacting with. None of the other primitives
      work unless you open a file first.
    <p>
      The next <b>file-</b> primitive you use dictates which mode the file
      will be in until the file is closed, reading or writing. To switch
      modes, close and then reopen the file.
    <p>
      The reading primitives include <a href=
      "dictionary.html#file-read"><tt>file-read</tt></a>, <a href=
      "dictionary.html#file-read-line"><tt>file-read-line</tt></a>,
      <a href="dictionary.html#file-read-characters"><tt>file-read-characters</tt></a>,
      and <a href="dictionary.html#file-at-end"><tt>file-at-end?</tt></a>
      Note that the file must exist already before you can open it for
      reading.
    <blockquote>
      <p>
        <b>Code Examples:</b> File Input Example
      </blockquote>
    <p>
      The primitives for writing are similar to the primitives that print
      things in the Command Center, except that the output gets saved to a
      file. They include <a href=
      "dictionary.html#file-print"><tt>file-print</tt></a>, <a href=
      "dictionary.html#file-show"><tt>file-show</tt></a>, <a href=
      "dictionary.html#file-type"><tt>file-type</tt></a>, and <a href=
      "dictionary.html#file-write"><tt>file-write</tt></a>. Note that you
      can never &quot;overwrite&quot; data. In other words, if you attempt
      to write to a file with existing data, all new data will be appended
      to the end of the file. (If you want to overwrite a file, use
      <a href="dictionary.html#file-delete"><tt>file-delete</tt></a> to
      delete it, then open it for writing.)
    <blockquote>
      <p>
        <b>Code Examples:</b> File Output Example
      </blockquote>
    <p>
      When you are finished using a file, you can use the command <a href=
      "dictionary.html#file-close"><tt>file-close</tt></a> to end your
      session with the file. If you wish to remove the file afterwards, use
      the primitive <a href=
      "dictionary.html#file-delete"><tt>file-delete</tt></a> to delete it.
      To close multiple opened files, one needs to first select the file by
      using <a href="dictionary.html#file-open"><tt>file-open</tt></a>
      before closing it.
    <pre>
;; Open 3 files
file-open &quot;myfile1.txt&quot;
file-open &quot;myfile2.txt&quot;
file-open &quot;myfile3.txt&quot;

;; Now close the 3 files
file-close
file-open &quot;myfile2.txt&quot;
file-close
file-open &quot;myfile1.txt&quot;
file-close
</pre>
    <p>
      Or, if you know you just want to close every file, you can use
      <a href="dictionary.html#file-close-all"><tt>file-close-all</tt></a>.
    <p>
      Two primitives worth noting are <a href=
      "dictionary.html#file-write"><tt>file-write</tt></a> and <a href=
      "dictionary.html#file-read"><tt>file-read</tt></a> . These primitives
      are designed to easily save and retrieve NetLogo constants such as
      numbers, lists, booleans, and strings. file-write will always output
      the variable in such a manner that file-read will be able to
      interpret it correctly.
    <pre>
file-open &quot;myfile.txt&quot;  ;; Opening file for writing
ask turtles
  [ file-write xcor file-write ycor ]
file-close

file-open &quot;myfile.txt&quot;  ;; Opening file for reading
ask turtles
  [ setxy file-read file-read ]
file-close
</pre>
    <blockquote>
      <p>
        <b>Code Examples:</b> File Input Example and File Output Example
      </blockquote>
    <p>
      <b>Letting the user choose</b>
    <p>
      The <a href=
      "dictionary.html#user-directory"><tt>user-directory</tt></a>,
      <a href="dictionary.html#user-file"><tt>user-file</tt></a>, and
      <a href="dictionary.html#user-new-file"><tt>user-new-file</tt></a>
      primitives are useful when you want the user to choose a file or
      directory for your code to operate on.
    <h2>
      <a name="movies" id="movies">Movies</a>
    </h2>
    <p>
      This section describes how to capture a QuickTime movie of a NetLogo
      model.
    <p>
      First, use the <a href=
      "dictionary.html#movie-start"><tt>movie-start</tt></a> command to
      start a new movie. The filename you provide should end with
      <tt>.mov</tt>, the extension for QuickTime movies.
    <p>
      To add a frame to your movie, use either <a href=
      "dictionary.html#movie-grab-view"><tt>movie-grab-view</tt></a> or
      <a href=
      "dictionary.html#movie-grab-interface"><tt>movie-grab-interface</tt></a>,
      depending on whether you want the movie to show just the current
      view, or the entire Interface tab. In a single movie, you must use
      only one <b>movie-grab-</b> primitive or the other; you can't mix
      them.
    <p>
      When you're done adding frames, use <a href=
      "dictionary.html#movie-close"><tt>movie-close</tt></a>.
    <pre>
;; export a 30 frame movie of the view
setup
movie-start &quot;out.mov&quot;
movie-grab-view ;; show the initial state
repeat 30
[ go
  movie-grab-view ]
movie-close
</pre>
    <p>
      By default, a movie will play back at 15 frames per second. To make a
      movie with a different frame rate, call <a href=
      "dictionary.html#movie-set-frame-rate"><tt>movie-set-frame-rate</tt></a>
      with a different number of frames per second. You must set the frame
      rate after <a href=
      "dictionary.html#movie-start"><tt>movie-start</tt></a> but before
      grabbing any frames.
    <p>
      To check the frame rate of your movie, or to see how many frames
      you've grabbed, call <a href=
      "dictionary.html#movie-status"><tt>movie-status</tt></a>, which
      reports a string that describes the state of the current movie.
    <p>
      To throw away a movie and delete the movie file, call <a href=
      "dictionary.html#movie-cancel"><tt>movie-cancel</tt></a>.
    <blockquote>
      <p>
        <b>Code Example:</b> Movie Example
      </blockquote>
    <p>
      Movies can only be generated from the NetLogo GUI, not when running
      headless, or by background runs in a parallel BehaviorSpace
      experiment.
    <p>
      NetLogo movies are exported as uncompressed QuickTime files. To play
      a QuickTime movie, you can use <a href=
      "http://www.apple.com/quicktime/download/">QuickTime Player</a>, a
      free download from Apple.
    <p>
      Since the movies are not compressed, they can take up a lot of disk
      space. You will probably want to compress your movies with
      third-party software. The software may give you a choice of different
      kinds of compression. Some kinds of compression are lossless, while
      others are lossy. &quot;Lossy&quot; means that in order to make the
      files smaller, some of the detail in the movie is lost. Depending on
      the nature of your model, you may want to avoid using lossy
      compression, for example if the view contains fine pixel-level
      detail.
    <p>
      One software package that can compress QuickTime movies on both the
      Mac and Windows platforms is QuickTime Pro. On Macs, iMovie works as
      well. PNG compression is a good choice for lossless compression.
    <h2>
      <a name="perspective" id="perspective">Perspective</a>
    </h2>
    <p>
      The 2D and the 3D view show the world from the perspective of the
      observer. By default the observer is looking down on the world from
      the positive z-axis at the origin. You can change the perspective of
      the observer by using the <a href=
      "dictionary.html#follow"><tt>follow</tt></a>, <a href=
      "dictionary.html#ride"><tt>ride</tt></a> and <a href=
      "dictionary.html#watch"><tt>watch</tt></a> observer commands and
      <a href="dictionary.html#follow-me"><tt>follow-me</tt></a>, <a href=
      "dictionary.html#ride-me"><tt>ride-me</tt></a> and <a href=
      "dictionary.html#watch-me"><tt>watch-me</tt></a> turtle commands.
      When in follow or ride mode the observer moves with the subject agent
      around the world. The difference between follow and ride is only
      visible in the 3D view. In the 3D view the user can change the
      distance behind the agent using the mouse. When the observer is
      following at zero distance from the agent it is actually riding the
      agent. When the observer is in watch mode it tracks the movements of
      one turtle without moving. In both views you will see a spotlight
      appear on the subject and in the 3D view the observer will turn to
      face the subject. To determine which agent is the focus you can use
      the <a href="dictionary.html#subject"><tt>subject</tt></a> reporter.
    <blockquote>
      <p>
        <b>Code Example:</b> Perspective Example
      </blockquote>
    <h2>
      <a name="drawing" id="drawing">Drawing</a>
    </h2>
    <p>
      The drawing is a layer where turtles can make visible marks.
    <p>
      In the view, the drawing appears on top of the patches but underneath
      the turtles. Initially, the drawing is empty and transparent.
    <p>
      You can see the drawing, but the turtles (and patches) can't.
      They can't sense the drawing or react to it. The drawing is just
      for people to look at.
    <p>
      Turtles can draw and erase lines in the drawing using the <a href=
      "dictionary.html#pen-down"><tt>pen-down</tt></a> and <a href=
      "dictionary.html#pen-erase"><tt>pen-erase</tt></a> commands. When a
      turtle's pen is down (or erasing), the turtle draws (or erases) a
      line behind it whenever it moves. The lines are the same color as the
      turtle. To stop drawing (or erasing), use <a href=
      "dictionary.html#pen-up"><tt>pen-up</tt></a>.
    <p>
      Lines drawn by turtles are normally one pixel thick. If you want a
      different thickness, set the <a href=
      "dictionary.html#pen-size"><tt>pen-size</tt></a> turtle variable to a
      different number before drawing (or erasing). In new turtles, the
      variable is set to 1.
    <p>
      Lines made when a turtle moves in a way that doesn't fix a
      direction, such as with <a href=
      "dictionary.html#setxy"><tt>setxy</tt></a> or <a href=
      "dictionary.html#move-to"><tt>move-to</tt></a>, the shortest path
      line that obeys the topology will be drawn.
    <p>
      Here's some turtles which have made a drawing over a grid of
      randomly shaded patches. Notice how the turtles cover the lines and
      the lines cover the patch colors. The <a href=
      "dictionary.html#pen-size"><tt>pen-size</tt></a> used here was 2:
    <p class="screenshot">
      <img alt="[color chart]" src="images/drawing.gif">
    <p>
      The <a href="dictionary.html#stamp"><tt>stamp</tt></a> command lets a
      turtle leave an image of itself behind in the drawing and <a href=
      "dictionary.html#stamperase"><tt>stamp-erase</tt></a> lets it remove
      the pixels below it in the drawing.
    <p>
      To erase the whole drawing, use the observer commmand <a href=
      "dictionary.html#clear-drawing"><tt>clear-drawing</tt></a>. (You can
      also use <a href="dictionary.html#clear-all"><tt>clear-all</tt></a>,
      which clears everything else too.)
    <p>
      <b>Importing an image</b>
    <p>
      The observer command <a href=
      "dictionary.html#import-drawing"><tt>import-drawing</tt></a> command
      allows you to import an image file from disk into the drawing.
    <p>
      <a href="dictionary.html#import-drawing"><tt>import-drawing</tt></a>
      is useful only for providing a backdrop for people to look at. If you
      want turtles and patches to react to the image, you should use
      <a href="dictionary.html#import-pcolors"><tt>import-pcolors</tt></a>
      or <a href=
      "dictionary.html#import-pcolors-rgb"><tt>import-pcolors-rgb</tt></a>
      instead.
    <p>
      <b>Comparison to other Logos</b>
    <p>
      Drawing works somewhat differently in NetLogo than some other Logos.
    <p>
      Notable differences include:
    <ul>
      <li>New turtles' pens are up, not down.
      <li>Instead of using a <tt>fence</tt> command to confine the turtle
      inside boundaries, in NetLogo you edit the world and turn wrapping
      off.
      <li>There is no <tt>screen-color</tt>, <tt>bgcolor</tt>, or
      <tt>setbg</tt>. You can make a solid background by coloring the
      patches, e.g. <tt>ask patches [ set pcolor blue ]</tt>.
      </ul>
    <p>
      Drawing features not supported by NetLogo:
    <ul>
      <li>There is no <tt>window</tt> command. This is used in some other
      Logos to let the turtle roam over an infinite plane.
      <li>There is no <tt>flood</tt> or <tt>fill</tt> command to fill an
      enclosed area with color.
      </ul>
    <h2>
      <a name="topology" id="topology">Topology</a>
    </h2>
    <p>
      The way the world of patches is connected can change. By default the
      world is a torus which means it isn't bounded, but
      &quot;wraps&quot; -- so when a turtle moves past the edge of the
      world, it disappears and reappears on the opposite edge and every
      patch has the same number of &quot;neighbor&quot; patches. If
      you're a patch on the edge of the world, some of your
      &quot;neighbors&quot; are on the opposite edge.
    <p>
      However, you can change the wrap settings with the Settings button.
      If wrapping is not allowed in a given direction then in that
      direction (x or y) the world is bounded. Patches along that boundary
      will have fewer than 8 neighbors and turtles will not move beyond the
      edge of the world.
    <p>
      The topology of the NetLogo world has four potential values, torus,
      box, vertical cylinder, or horizontal cylinder. The topology is
      controlled by enabling or disabling wrapping in the x or y
      directions. The default world is a torus.
    <p>
      A torus wraps in both directions, meaning that the top and bottom
      edges of the world are connected and the left and right edges are
      connected. So if a turtle moves beyond the right edge of the world it
      appears again on the left and the same for the top and bottom.
    <p>
      A box does not wrap in either direction. The world is bounded so
      turtles that try to move off the edge of the world cannot. Note that
      the patches around edge of the world have fewer than eight neighbors;
      the corners have three and the rest have five.
    <p>
      Horizontal and vertical cylinders wrap in one direction but not the
      other. A horizontal cylinder wraps vertically, so the top of the
      world is connected to the bottom. but the left and right edges are
      bounded. A vertical cylinder is the opposite; it wraps horizontally
      so the left and right edges are connected, but the top and bottom
      edges are bounded.
    <blockquote>
      <p>
        <b>Code Example:</b> Neighbors Example
      </blockquote>
    <p>
      When coordinates wrap, turtles and links wrap visually in the view,
      too. If a turtle shape or link extends past an edge, part of it will
      appear at the other edge. (Turtles themselves are points that take up
      no space, so they cannot be on both sides of the world at once, but
      in the view, they appear to take up space because they have a shape.)
    <p>
      Wrapping also affects how the view looks when you are following a
      turtle. On a torus, wherever the turtle goes, you will always see the
      whole world around it:
    <p class="screenshot">
      <img alt="screenshot" src="images/torus.jpg">
    <p>
      Whereas in a box or cylinder the world has edges, so the areas past
      those edges show up in the view as gray:
    <p class="screenshot">
      <img alt="screenshot" src="images/box.jpg">
    <blockquote>
      <p>
        <b>Code Example:</b> Termites Perspective Demo (torus), Ants
        Perspective Demo (box)
      </blockquote>
    <p>
      The topology settings also control the behavior of the distance(xy),
      in-radius, in-cone, face(xy), and towards(xy) primitives. The
      topology controls whether the primitives wrap or not. They always use
      the shortest path allowed by the topology. For example, the distance
      from the center of the patches in the bottom right corner (min-pxcor,
      min-pycor) and the upper left corner (max-pxcor, max-pycor) will be
      as follows for each topology given that the min and max pxcor and
      pycor are +/-2:
    <ul>
      <li>Torus - sqrt(2) ~ 1.414 (this will be the same for all world
      sizes since the patches are directly diagonal to each other in a
      torus.)
      <li>Box - sqrt(world-width^2 + world-height^2) ~ 7.07
      <li>Vertical Cylinder - sqrt(world-height^2 + 1) ~ 5.099
      <li>Horizontal Cylinder - sqrt(world-width^2 + 1) ~ 5.099
      </ul>
    <p>
      All the other primitives will act similarly to distance. If you
      formerly used <tt>-nowrap</tt> primitives in your model we recommend
      removing them and changing the topology of the world instead.
    <p>
      If your model has turtles that move around you'll need to think
      about what happens to them when they reach the edge of the world, if
      the topology you're using has some non-wrapping edges. There are
      a few common options: the turtle is reflected back into the world
      (either systematically or randomly), the turtle exits the system
      (dies), or the turtle is hidden. It is no longer necessary to check
      the bounds using turtle coordinates, instead we can just ask NetLogo
      if a turtle is at the edge of the world. There are a couple ways of
      doing this, the simplest is to use the <a href=
      "dictionary.html#can-move"><tt>can-move?</tt></a> primitive.
    <pre>
if not can-move? distance [ rt 180 ]
</pre>
    <p>
      can-move? merely returns true if the position <i>distance</i> in
      front of the turtle is inside the NetLogo world, false otherwise. In
      this case, if the turtle is at the edge of the world it simple goes
      back the way it came. You can also use <tt>patch-ahead 1 !=
      nobody</tt> in place of <a href=
      "dictionary.html#can-move"><tt>can-move?</tt></a>. If you need to do
      something smarter that simply turning around it may be useful to use
      <a href="dictionary.html#patch-at"><tt>patch-at</tt></a> with
      <a href="dictionary.html#dx"><tt>dx</tt></a> and <a href=
      "dictionary.html#dy"><tt>dy</tt></a>.
    <pre>
if patch-at dx 0 = nobody [
  set heading (- heading)
]
if patch-at 0 dy = nobody [
  set heading (180 - heading)
]
</pre>
    <p>
      This tests whether the turtle is hitting a horizontal or vertical
      wall and bounces off that wall.
    <p>
      In some models if a turtle can't move forward it simply dies
      (exits the system, like in Conductor or Mousetraps).
    <pre>
if not can-move? distance[ die ]
</pre>
    <p>
      If you are moving turtles using <tt>setxy</tt> rather than
      <tt>forward</tt> you should test to make sure the patch you are about
      to move to exists since <tt>setxy</tt> throws a runtime error if it
      is given coordinates outside the world. This is a common situation
      when the model is simulating an infinite plane and turtles outside
      the view should simply be hidden.
    <pre>
let new-x new-value-of-xcor
let new-y new-value-of-ycor

ifelse patch-at (new-x - xcor) (new-y - ycor) = nobody
  [ hide-turtle ]
  [ setxy new-x new-y
    show-turtle ]
</pre>
    <p>
      Several models in the Models Library use this technique, Gravitation,
      N-Bodies, and Electrostatics are good examples.
    <p>
      The <tt>diffuse</tt> and <tt>diffuse4</tt> commands behave correctly
      in all topologies. Each patch diffuses and equal amount of the
      diffuse variable to each of its neighbors, if it has fewer than 8
      neighbors (or 4 if you are using <tt>diffuse4</tt>), the remainder
      stays on the diffusing patch. This means that the overall sum of
      patch-variable across the world remains constant. However, if you
      want the diffuse matter to still fall off the edges of the world as
      it would on an infinite plane you still need to clear the edges each
      step as in the Diffuse Off Edges Example.
    <h2>
      <a name="links" id="links">Links</a>
    </h2>
    <p>
      A link is an agent that connects two turtles. These turtles are
      sometimes also called nodes.
    <p>
      The link is always drawn as a line between the two turtles. Links do
      not have a location as turtles do, they are not considered to be on
      any patch and you cannot find the distance from a link to another
      point.
    <p>
      There are two flavors of links, undirected and directed. A directed
      link is <i>out</i> of, or <i>from</i>, one node and <i>in</i>to, or
      <i>to</i>, another node. The relationship of a parent to a child
      could be modeled as a directed link. An undirected link appears the
      same to both nodes, each node has a link <i>with</i> another node.
      The relationship between spouses, or siblings, could be modeled as an
      undirected link.
    <p>
      There is a global agentset of all links, just as with turtles and
      patches. You can create undirected links using the <a href=
      "dictionary.html#create-link-with"><tt>create-link-with</tt></a> and
      <a href=
      "dictionary.html#create-links-with"><tt>create-links-with</tt></a>
      commands; and directed links using the <a href=
      "dictionary.html#create-link-to"><tt>create-link-to</tt></a>,
      <a href="dictionary.html#create-links-to"><tt>create-links-to</tt></a>,
      <a href=
      "dictionary.html#create-link-from"><tt>create-link-from</tt></a>, and
      <a href=
      "dictionary.html#create-links-from"><tt>create-links-from</tt></a>
      commands. Once the first link has been created directed or
      undirected, all unbreeded links must match (links also support
      breeds, much like turtles, which will be discussed shortly); it's
      impossible to have two unbreeded links where one is directed and the
      other is undirected. A runtime error occurs if you try to do it. (If
      all unbreeded links die, then you can create links of that breed that
      are different in flavor from the previous links.)
    <p>
      In general, primitives that work with directed links have
      &quot;in&quot;, &quot;out&quot;, &quot;to&quot;, and &quot;from&quot;
      in their names. Undirected ones either omit these or use
      &quot;with&quot;.
    <p>
      A link's <tt>end1</tt> and <tt>end2</tt> variables contain the
      two turtles the link connects. If the link is directed, it goes from
      end1 to end2. If the link is undirected, end1 is always the older of
      the two turtles, that is, the turtle with the smaller who number.
    <p>
      Link breeds, like turtle breeds, allow you to define different types
      of links in your model. Link breeds must either be directed or
      undirected, unlike unbreeded links this is defined at compile time
      rather than run time. You declare link breeds using the keywords
      <a href=
      "dictionary.html#undirected-link-breed"><tt>undirected-link-breed</tt></a>
      and <a href=
      "dictionary.html#directed-link-breed"><tt>directed-link-breed</tt></a>.
      Breeded links can be created using the commands <a href=
      "dictionary.html#create-breed-with"><tt>create-&lt;breed&gt;-with</tt></a>
      and <a href=
      "dictionary.html#create-breed-with"><tt>create-&lt;breeds&gt;-with</tt></a>
      for undirected breeds and the commands <a href=
      "dictionary.html#create-breed-to"><tt>create-&lt;breed&gt;-to</tt></a>,
      <a href=
      "dictionary.html#create-breeds-to"><tt>create-&lt;breeds&gt;-to</tt></a>,
      <a href=
      "dictionary.html#create-breed-from"><tt>create-&lt;breed&gt;-from</tt></a>,
      and <a href=
      "dictionary.html#create-breeds-from"><tt>create-&lt;breeds&gt;-from</tt></a>
      for directed links.
    <p>
      There cannot be more than one undirected link of the same breed (or
      two unbreeded links) between a pair of agents, nor more than one
      directed link of the same breed in the same direction between a pair
      of agents. You can have two directed links of the same breed (or two
      unbreeded links) between a pair if they are in opposite directions.
    <p>
      <b>Layouts</b>
    <p>
      As part of our network support we have also added several different
      primitives that will help you to visualize the networks. The simplest
      is <a href="dictionary.html#layout-circle"><tt>layout-circle</tt></a>
      which evenly spaces the agents around the center of the world given a
      radius.
    <p class="screenshot">
      <img alt="screen shot" src="images/circle-layout.gif">
    <p>
      <a href="dictionary.html#layout-radial"><tt>layout-radial</tt></a> is
      a good layout if you have something like a tree structure, though
      even if there are some cycles in the tree it will still work, though
      as there are more and more cycles it will probably not look as good.
      <a href="dictionary.html#layout-radial"><tt>layout-radial</tt></a>
      takes a root agent to be the central node places it at (0,0) and
      arranges the nodes connected to it in a concentric pattern. Nodes one
      degree away from the root will be arranged in a circular pattern
      around the central node and the next level around those nodes and so
      on. <a href=
      "dictionary.html#layout-radial"><tt>layout-radial</tt></a> will
      attempt to account for asymmetrical graphs and give more space to
      branches that are wider. <a href=
      "dictionary.html#layout-radial"><tt>layout-radial</tt></a> also takes
      a breed as an input so you use one breed of links to layout the
      network and not another.
    <p class="screenshot">
      <img alt="screen shot" src="images/radial-layout.gif">
    <p>
      Given a set of anchor nodes <a href=
      "dictionary.html#layout-tutte"><tt>layout-tutte</tt></a> places all
      the other nodes at the center of mass of the nodes it is linked to.
      The anchor set is automatically arranged in a circle layout with a
      user defined radius and the other nodes will converge into place
      (this of course means that you may have to run it several times
      before the layout is stable.)
    <p class="screenshot">
      <img alt="screen shot" src="images/tutte-layout.gif">
    <p>
      <a href="dictionary.html#layout-spring"><tt>layout-spring</tt></a> is
      useful for many kinds of networks. The drawback is that is relatively
      slow since it takes many iterations to converge. In this layout the
      links act as springs that pull the nodes they connect toward each
      other and the nodes repel each other. The strength of the forces is
      controlled by inputs to the primitives. These inputs will always have
      a value between 0 and 1; keep in mind that very small changes can
      still affect the appearance of the network. The springs also have a
      length (in patch units), however, because of all the forces involved
      the nodes will not end up exactly that distance from each other.
    <blockquote>
      <p>
        <b>Code Examples:</b>Network Example, Network Import Example, Giant
        Component, Small Worlds, Preferential Attachment
      </blockquote>
    <h2>
      <a name="tasks" id="tasks">Tasks</a>
    </h2>
    <p>
      Tasks let you store code to be run later. There are two kinds,
      command tasks and reporter tasks.
    <p>
      Tasks are values, which means that a task may be passed as input,
      reported as a result, or stored in a variable.
    <p>
      A given task might be run once, multiple times, or not at all.
    <p>
      In other programming languages tasks are known as first-class
      functions, closures, or lambda.
    <h3>
      Task primitives
    </h3>
    <p>
      Primitives specific to tasks are <tt>task</tt>,
      <tt>is-command-task?</tt>, and <tt>is-reporter-task?</tt>.
    <p>
      The <tt>run</tt> command accepts command tasks as well as
      strings.
    <p>
      The <tt>runresult</tt> reporter accepts reporter tasks as well as
      strings.
    <p>
      The <tt>task</tt> primitive creates a task. The task it reports might
      be a command task or a reporter task, depending on what kind of block
      you pass it. For example <tt>task [ fd 1 ]</tt> reports a command
      task, because <tt>fd</tt> is a command, while <tt>task [ count
      turtles ]</tt> reports a reporter task, because <tt>count</tt> is a
      reporter.
    <p>
      These primitives require tasks as input: <tt>foreach</tt>, <tt>map</tt>,
      <tt>reduce</tt>, <tt>filter</tt>, <tt>n-values</tt>,
      <tt>sort-by</tt>.  When calling these primitives, the <tt>task</tt>
      primitive is optional,
      so for example one may write simply <tt>foreach mylist [ print ? ]</tt>
      instead of <tt>foreach mylist task [ print ? ]</tt>, though the latter
      is also accepted.
      (Because <tt>task</tt> is optional, the syntax for these primitives
      is backward-compatible with existing code from previous NetLogo
      versions.)
    <h3>
      Task inputs
    </h3>
    <p>
      A task may take zero or more inputs. The inputs are referenced using
      the special variables <tt>?</tt> (aka <tt>?1</tt>), <tt>?2</tt>,
      <tt>?3</tt>, etc. Any extra inputs are ignored.
    <h3>
      Tasks and strings
    </h3>
    <p>
      Creating and running tasks is fast. To use <tt>run</tt> or
      <tt>runresult</tt> on a new string for the first time is about 100x
      slower than running a task. Modelers should normally use tasks
      instead of running strings, except when running strings entered by
      the user.
    <h3>
      Concise syntax
    </h3>
    <p>
      Simple uses of <tt>foreach</tt>, <tt>map</tt>, <tt>reduce</tt>,
      <tt>filter</tt>, <tt>n-values</tt>, and <tt>sort-by</tt> can be
      written with an especially concise syntax. You can write:
    <pre>
map abs [1 -2 3 -4] =&gt; [1 2 3 4]
reduce + [1 2 3 4] =&gt; 10
filter is-number? [1 &quot;x&quot; 3] =&gt; [1 3]
foreach [1 2 3 4] print
</pre>
    <p>
      In older NetLogo versions, these had to be written:
    <pre>
map [abs ?] [1 -2 3 -4] =&gt; [1 2 3 4]
reduce [?1 + ?2] [1 2 3 4] =&gt; 10
filter [is-number? ?] [1 &quot;x&quot; 3] =&gt; [1 3]
foreach [1 2 3 4] [ print ? ]
</pre>
    <p>
      The old syntax remains valid.
    <p>
      The concise syntax can also be used with the <tt>task</tt> primitive.
      So for example <tt>task die</tt> is short for <tt>task [ die ]</tt>,
      <tt>task fd</tt> is short for <tt>task [fd ?]</tt>, and <tt>task
      +</tt> is short for <tt>task [?1 + ?2]</tt>.
    <h3>
      Tasks as closures
    </h3>
    <p>
      Tasks are &quot;closures&quot;; that means they capture or
      &quot;close over&quot; the bindings (not just the current values) of
      local variables and procedure inputs. They do not capture agent
      variables and do not capture the identity of the current agent.
    <h3>
      Nonlocal exits
    </h3>
    <p>
      The <tt>stop</tt> and <tt>report</tt> commands exit from the
      dynamically enclosing procedure, not the enclosing task. (This is
      backward-compatible with older NetLogo versions.)
    <h3>
      Tasks and extensions
    </h3>
    <p>
      The extensions API supports writing primitives that accept tasks as
      input. Write us for sample code.
    <h3>
      Limitations
    </h3>
    <p>
      We hope to address at least some of the following limitations in
      future NetLogo versions:
    <ul>
      <li>
        <tt>import-world</tt> does not support tasks.
      <li>Task inputs can't be given names. This can make nesting
      reporter tasks difficult. (Command tasks can use <tt>let</tt> to give
      their inputs names, if needed.)
      <li>Tasks can't be variadic (accept a varying number of inputs).
      <li>Reporter tasks can't contain commands, only a single reporter
      expression. So for example you must use <tt>ifelse-value</tt> not
      <tt>if</tt>, and you don't use <tt>report</tt> at all. If your
      code is too complex to be written as one reporter, you'll need to
      move the code to a separate reporter procedure, and then call that
      procedure from your task, passing it any needed inputs.
      <li>Tasks are not interchangeable with command blocks and reporter
      blocks. Only the primitives listed above accept tasks as input.
      Control primitives such as <tt>ifelse</tt> and <tt>while</tt> and
      agent primitives such as <tt>of</tt> and <tt>with</tt> don't
      accept tasks. So for example if I have a reporter task <tt>r</tt> and two
      command tasks <tt>c1</tt> and <tt>c2</tt>, I can't write <tt>ifelse r c1 c2</tt>, I
      must write <tt>ifelse runresult r [ run c1 ] [ run c2 ]</tt>.
      <li>The concise syntax where <tt>task</tt> may be omitted is
      only available to primitives and extension primitives, not
      ordinary procedures. So for example if I have a procedure <tt>p</tt>
      that accepts a task as input, it must be called as e.g.
      <tt>p task [ ... ]</tt> not <tt>p [ ... ]</tt>.
      </ul>
    <h3>
      Code example
    </h3>
    <blockquote>
      <p>
        <b>Code Example:</b> State Machine Example
      </blockquote>
    <h2>
      <a name="ask-concurrent" id="ask-concurrent">Ask-Concurrent</a>
    </h2>
    <p>
      In very old versions of NetLogo, <a href=
      "dictionary.html#ask"><tt>ask</tt></a> was concurrent by default.
      Since NetLogo 4.0 (2007), <a href=
      "dictionary.html#ask"><tt>ask</tt></a> is serial, that is, the agents
      run the commands inside the ask one at a time.
    <p>
      The following information describes the behavior of the <a href=
      "dictionary.html#ask-concurrent"><tt>ask-concurrent</tt></a> command,
      which behaves the way the old <a href=
      "dictionary.html#ask"><tt>ask</tt></a> behaved.
    <p>
      <a href="dictionary.html#ask-concurrent"><tt>ask-concurrent</tt></a>
      produces simulated concurrency via a mechanism of turn-taking. The
      first agent takes a turn, then the second agent takes a turn, and so
      on until every agent in the asked agentset has had a turn. Then we go
      back to the first agent. This continues until all of the agents have
      finished running all of the commands.
    <p>
      An agent's &quot;turn&quot; ends when it performs an action that
      affects the state of the world, such as moving, or creating a turtle,
      or changing the value of a global, turtle, patch, or link variable.
      (Setting a local variable doesn't count.)
    <p>
      The <a href="dictionary.html#forward"><tt>forward</tt></a> (<a href=
      "dictionary.html#fd"><tt>fd</tt></a>) and <a href=
      "dictionary.html#back"><tt>back</tt></a> (<a href=
      "dictionary.html#bk"><tt>bk</tt></a>) commands are treated specially.
      When used inside <a href=
      "dictionary.html#ask-concurrent"><tt>ask-concurrent</tt></a>, these
      commands can take multiple turns to execute. During its turn, the
      turtle can only move by one step. Thus, for example, <tt>fd 20</tt>
      is equivalent to <tt>repeat 20 [ fd 1 ]</tt>, where the turtle's
      turn ends after each run of <tt>fd</tt>. If the distance specified
      isn't an integer, the last fraction of step takes a full turn. So
      for example <tt>fd 20.3</tt> is equivalent to <tt>repeat 20 [ fd 1 ]
      fd 0.3</tt>.
    <p>
      The <a href="dictionary.html#jump"><tt>jump</tt></a> command always
      takes exactly one turn, regardless of distance.
    <p>
      To understand the difference between <a href=
      "dictionary.html#ask"><tt>ask</tt></a> and <a href=
      "dictionary.html#ask-concurrent"><tt>ask-concurrent</tt></a>,
      consider the following two commands:
    <pre>
ask turtles [ fd 5 ]
ask-concurrent turtles [ fd 5 ]
</pre>
    <p>
      With <a href="dictionary.html#ask"><tt>ask</tt></a>, the first turtle
      takes five steps forward, then the second turtle takes five steps
      forward, and so on.
    <p>
      With <a href=
      "dictionary.html#ask-concurrent"><tt>ask-concurrent</tt></a>, all of
      the turtles take one step forward. Then they all take a second step,
      and so on. Thus, the latter command is equivalent to:
    <pre>
repeat 5 [ ask turtles [ fd 1 ] ]
</pre>
    <blockquote>
      <p>
        <b>Code Example:</b> Ask-Concurrent Example shows the difference
        between <a href="dictionary.html#ask"><tt>ask</tt></a> and <a href=
        "dictionary.html#ask-concurrent"><tt>ask-concurrent</tt></a>.
      </blockquote>
    <p>
      The behavior of <a href=
      "dictionary.html#ask-concurrent"><tt>ask-concurrent</tt></a> cannot
      always be so simply reproduced using <a href=
      "dictionary.html#ask"><tt>ask</tt></a>, as in this example. Consider
      this command:
    <pre>
ask-concurrent turtles [ fd random 10 ]
</pre>
    <p>
      In order to get the same behavior using <a href=
      "dictionary.html#ask"><tt>ask</tt></a>, we would have to write:
    <pre>
turtles-own [steps]
ask turtles [ set steps random 10 ]
while [any? turtles with [steps &gt; 0]] [
  ask turtles with [steps &gt; 0] [
    fd 1
    set steps steps - 1
  ]
]
</pre>
    <p>
      To prolong an agent's &quot;turn&quot;, use the <a href=
      "dictionary.html#without-interruption"><tt>without-interruption</tt></a>
      command. (The command blocks inside some commands, such as <a href=
      "dictionary.html#create-turtles"><tt>create-turtles</tt></a> and
      <a href="dictionary.html#hatch"><tt>hatch</tt></a>, have an implied
      <a href=
      "dictionary.html#without-interruption"><tt>without-interruption</tt></a>
      around them.)
    <p>
      Note that the behavior of <a href=
      "dictionary.html#ask-concurrent"><tt>ask-concurrent</tt></a> is
      completely deterministic. Given the same code and the same initial
      conditions, the same thing will always happen (if you are using the
      same version of NetLogo and begin your model run with the same random
      seed).
    <p>
      In general, we suggest you write your model so that it does not
      depend on the exact details of how <a href=
      "dictionary.html#ask-concurrent"><tt>ask-concurrent</tt></a> works.
      We make no guarantees that its semantics will remain the same in
      future versions of NetLogo.
    <h2>
      <a name="tie" id="tie">Tie</a>
    </h2>
    <p>
      Tie connects two turtles so that the movement of one turtles affects
      the location and heading of another. Tie is a property of links so
      there must be a link between two turtles to create a tie
      relationship.
    <p>
      When a link's <a href=
      "dictionary.html#tie-mode"><tt>tie-mode</tt></a> is set to
      &quot;fixed&quot; or &quot;free&quot; <a href=
      "dictionary.html#end1"><tt>end1</tt></a> and <a href=
      "dictionary.html#end2"><tt>end2</tt></a> are tied together. If the
      link is directed <a href="dictionary.html#end1"><tt>end1</tt></a> is
      the &quot;root agent&quot; and <a href=
      "dictionary.html#end2"><tt>end2</tt></a> is the &quot;leaf
      agent&quot;. That is when <a href=
      "dictionary.html#end1"><tt>end1</tt></a> moves (using <a href=
      "dictionary.html#fd"><tt>fd</tt></a>, <a href=
      "dictionary.html#jump"><tt>jump</tt></a>, <a href=
      "dictionary.html#setxy"><tt>setxy</tt></a>, etc.) <a href=
      "dictionary.html#end2"><tt>end2</tt></a> also moves the same distance
      and direction. However when <a href=
      "dictionary.html#end2"><tt>end2</tt></a> moves it does not affect
      <a href="dictionary.html#end1"><tt>end1</tt></a>.
    <p>
      If the link is undirected it is a reciprocal tie relationship,
      meaning, if either turtle moves the other turtle will also move. So
      depending on which turtle is moving either turtle can be considered
      the root or the leaf. The root turtle is always the turtle that
      initiates the movement.
    <p>
      When the root turtle turns right or left, the leaf turtle rotates
      around the root turtle the same amount as if a stiff were attaching
      the turtles. When <a href=
      "dictionary.html#tie-mode"><tt>tie-mode</tt></a> is set to
      &quot;fixed&quot; the heading of the leaf turtle changes by the same
      amount. If the <a href=
      "dictionary.html#tie-mode"><tt>tie-mode</tt></a> is set to
      &quot;free&quot; the heading of the leaf turtle is unchanged.
    <p>
      The <a href="dictionary.html#tie-mode"><tt>tie-mode</tt></a> of a
      link can be set to &quot;fixed&quot; using the <a href=
      "dictionary.html#tie"><tt>tie</tt></a> command and set to
      &quot;none&quot; (meaning the turtles are no longer tied) using
      <a href="dictionary.html#untie"><tt>untie</tt></a> to set the mode to
      &quot;free&quot; you need to: <tt>set tie-mode &quot;free&quot;</tt>.
    <blockquote>
      <p>
        <b>Code Example:</b> Tie System Example
      </blockquote>
    <h2>
      <a name="includes" id="includes">Multiple source files</a>
    </h2>
    <p>
      The <a href="dictionary.html#includes"><tt>__includes</tt></a>
      keyword allows you to use multiple source files in a single NetLogo
      model.
    <p>
      The keyword begins with two underscores to indicate that the feature
      is experimental and may change in future NetLogo releases.
    <p>
      When you open a model that uses the <a href=
      "dictionary.html#includes"><tt>__includes</tt></a> keyword, or if you
      add it to the top of a model and hit the Check button, the includes
      menu will appear in the toolbar. From the includes menu you can
      select from the files included in this model.
    <p>
      When you open included files they appear in additional tabs. See the
      <a href="interface.html#includes">Interface Guide</a> for more
      details.
    <p>
      You can have anything in external source files (<tt>.nls</tt>) that
      you would normally put in the Code tab: <a href=
      "dictionary.html#globals"><tt>globals</tt></a>, <a href=
      "dictionary.html#breed"><tt>breed</tt></a>, <a href=
      "dictionary.html#turtles-own"><tt>turtles-own</tt></a>, <a href=
      "dictionary.html#patches-own"><tt>patches-own</tt></a>, <a href=
      "dictionary.html#breeds-own"><tt>breeds-own</tt></a>, procedure
      definitions, etc. Note though that these declarations all share the
      same namespace. That is, if you declare a global <tt>my-global</tt>
      in the Code tab you cannot declare a global (or anything else) with
      the name <tt>my-global</tt> in any file that is included in the
      model. <tt>my-global</tt> will be accessible from all the included
      files. The same would be true if <tt>my-global</tt> were declared in
      one of the included files.
    <h2>
      <a name="syntax" id="syntax">Syntax</a>
    </h2>
    <h3>
      Colors
    </h3>
    <p>
      In the Code tab and elsewhere in the NetLogo user interface, program
      code is color-coded by the following scheme:
    <ul>
      <li>Keywords are green
      <li>Constants are orange
      <li>Comments are gray
      <li>Primitive commands are blue
      <li>Primitive reporters are purple
      <li>Everything else is black
      </ul>
    <h3>
      Notice
    </h3>
    <p>
      The remainder of this section contains technical terminology which
      will be unfamiliar to some readers.
    <h3>
      Keywords
    </h3>
    <p>
      The only keywords in the language are <a href=
      "dictionary.html#globals"><tt>globals</tt></a>, <a href=
      "dictionary.html#breed"><tt>breed</tt></a>, <a href=
      "dictionary.html#turtles-own"><tt>turtles-own</tt></a>, <a href=
      "dictionary.html#patches-own"><tt>patches-own</tt></a>, <a href=
      "dictionary.html#to"><tt>to</tt></a>, <a href=
      "dictionary.html#to-report"><tt>to-report</tt></a>, and <a href=
      "dictionary.html#end"><tt>end</tt></a>, plus <a href=
      "dictionary.html#extensions"><tt>extensions</tt></a> and the
      experimental <a href=
      "dictionary.html#includes"><tt>__includes</tt></a> keyword. (Built-in
      primitive names may not be shadowed or redefined, so they are
      effectively a kind of keyword as well.)
    <h3>
      Identifiers
    </h3>
    <p>
      All primitives, global and agent variable names, and procedure names
      share a single global case-insensitive namespace; local names
      (<a href="dictionary.html#let"><tt>let</tt></a> variables and the
      names of procedure inputs) may not shadow global names or each other.
      Identifiers may contain any Unicode letter or digit and the following
      ASCII characters:
    <pre>
.?=*!&lt;&gt;:#+/%$_^'&amp;-
</pre>
    <p>
      Some primitive names begin with two underscores to indicate that they
      are experimental and are especially likely to change or be removed in
      future NetLogo releases.
    <p>
      Identifiers beginning with a question mark are reserved.
    <h3>
      Scope
    </h3>
    <p>
      NetLogo is lexically scoped. Local variables (including inputs to
      procedures) are accessible within the block of commands in which they
      are declared, but not accessible by procedures called by those
      commands.
    <h3>
      Comments
    </h3>
    <p>
      The semicolon character introduces a comment, which lasts until the
      end of the line. There is no multi-line comment syntax.
    <h3>
      Structure
    </h3>
    <p>
      A program consists of optional declarations (<a href=
      "dictionary.html#globals"><tt>globals</tt></a>, <a href=
      "dictionary.html#breed"><tt>breed</tt></a>, <a href=
      "dictionary.html#turtles-own"><tt>turtles-own</tt></a>, <a href=
      "dictionary.html#patches-own"><tt>patches-own</tt></a>, <a href=
      "dictionary.html#breeds-own"><tt>&lt;BREED&gt;-own</tt></a>, <a href=
      "dictionary.html#extensions"><tt>extensions</tt></a>) in any
      order, followed by zero or more procedure definitions. Multiple
      breeds may be declared with separate <a href=
      "dictionary.html#breed"><tt>breed</tt></a> declarations; the other
      declarations may appear once only.
    <p>
      Every procedure definition begins with <a href=
      "dictionary.html#to"><tt>to</tt></a> or <a href=
      "dictionary.html#to-report"><tt>to-report</tt></a>, the procedure
      name, and an optional bracketed list of input names. Every procedure
      definition ends with <a href="dictionary.html#end"><tt>end</tt></a>.
      In between are zero or more commands.
    <h3>
      Commands and reporters
    </h3>
    <p>
      Commands take zero or more inputs; the inputs are reporters, which
      may also take zero or more inputs. No punctuation separates or
      terminates commands; no punctuation separates inputs. Identifiers
      must be separated by whitespace or by parentheses or square brackets.
      (So for example, <tt>a+b</tt> is a single identifier, but
      <tt>a(b[c]d)e</tt> contains five identifiers.)
    <p>
      All commands are prefix. All user-defined reporters are prefix. Most
      primitive reporters are prefix, but some (arithmetic operators,
      boolean operators, and some agentset operators like with and
      in-points) are infix.
    <p>
      All commands and reporters, both primitive and user-defined, take a
      fixed number of inputs by default. (That's why the language can
      be parsed though there is no punctuation to separate or terminate
      commands and/or inputs.) Some primitives are variadic, that is, may
      optionally take a different number of inputs than the default;
      parentheses are used to indicate this, e.g. <tt>(list 1 2 3)</tt>
      (since the <a href="dictionary.html#list"><tt>list</tt></a> primitive
      only takes two inputs by default). Parentheses are also used to
      override the default operator precedence, e.g. <tt>(1 + 2) * 3</tt>,
      as in other programming languages.
    <p>
      Sometimes an input to a primitive is a command block (zero or more
      commands inside square brackets) or a reporter block (a single
      reporter expression inside square brackets). User-defined procedures
      may not take a command or reporter block as input.
    <p>
      Operator precedences are as follows, high to low:
    <ul>
      <li>
        <a href="dictionary.html#with"><tt>with</tt></a>, <a href=
        "dictionary.html#at-points"><tt>at-points</tt></a>, <a href=
        "dictionary.html#in-radius"><tt>in-radius</tt></a>, <a href=
        "dictionary.html#in-cone"><tt>in-cone</tt></a>
      <li>(all other primitives and user-defined procedures)
      <li>
        <tt>^</tt>
      <li>
        <tt>*</tt>, <tt>/</tt>, <tt>mod</tt>
      <li>
        <tt>+</tt>, <tt>-</tt>
      <li>
        <tt>&lt;</tt>, <tt>&gt;</tt>, <tt>&lt;=</tt>, <tt>&gt;=</tt>
      <li>
        <tt>=</tt>, <tt>!=</tt>
      <li>
        <a href="dictionary.html#and"><tt>and</tt></a>, <a href=
        "dictionary.html#or"><tt>or</tt></a>, <a href=
        "dictionary.html#xor"><tt>xor</tt></a>
      </ul>
    <h3>
      Compared to other Logos
    </h3>
    <p>
      There is no agreed-upon standard definition of Logo; it is a loose
      family of languages. We believe that NetLogo has enough in common
      with other Logos to earn the Logo name. Still, NetLogo differs in
      some respects from most other Logos. The most important differences
      are as follows.
    <h4>
      Surface differences
    </h4>
    <ul>
      <li>The precedence of mathematical operators is different. Infix math
      operators (like <tt>+</tt>, <tt>*</tt>, etc.) have lower precedence
      than reporters with names. For example, in many Logos, if you write
      <tt>sin x + 1</tt>, it will be interpreted as <tt>sin (x + 1)</tt>.
      NetLogo, on the other hand, interprets it the way most other
      programming languages would, and the way the same expression would be
      interpreted in standard mathematical notation, namely as <tt>(sin x)
      + 1</tt>.
      <li>The <a href="dictionary.html#and"><tt>and</tt></a> and <a href=
      "dictionary.html#or"><tt>or</tt></a> reporters are special forms, not
      ordinary functions, and they &quot;short circuit&quot;, that is, they
      only evaluate their second input if necessary.
      <li>Procedures can only be defined in the Code tab, not interactively
      in the Command Center.
      <li>Reporter procedures, that is, procedures that &quot;report&quot;
      (return) a value, must be defined with <a href=
      "dictionary.html#to-report"><tt>to-report</tt></a> instead of
        <a href="dictionary.html#to"><tt>to</tt></a>. The command to report
        a value from a reporter procedure is <a href=
        "dictionary.html#report"><tt>report</tt></a>, not <tt>output</tt>.
      <li>When defining a procedure, the inputs to the procedure must be
      enclosed in square brackets, e.g. <tt>to square [x]</tt>.
      <li>Variable names are always used without any punctuation: always
      <tt>foo</tt>, never <tt>:foo</tt> or <tt>&quot;foo</tt>. (To make
      this work, instead of a <tt>make</tt> command taking a quoted
      argument we supply a <a href="dictionary.html#set"><tt>set</tt></a>
      special form which does not evaluate its first input.) As a result,
      procedures and variables occupy a single shared namespace.
      </ul>
    <p>
      The last three differences are illustrated in the following procedure
      definitions:
    <table>
      <tr>
        <th>
          most Logos
        <th>
          NetLogo
        <tr>
        <td>
          <pre>
to square :x
output :x * :x
end
</pre>
        <td>
          <pre>
to-report square [x]
report x * x
end
</pre>
        </table>
    <h4>
      Deeper differences
    </h4>
    <ul>
      <li>NetLogo's local variables and inputs to procedures are
      lexically scoped, not dynamically scoped.
      <li>NetLogo has no &quot;word&quot; data type (what Lisp calls
      &quot;symbols&quot;). Eventually, we may add one, but since it is
      seldom requested, it may be that the need doesn't arise much in
      agent-based modeling. We do have strings. In most situations where
      traditional Logo would use words, we simply use strings instead. For
      example in Logo you could write <tt>[see spot run]</tt> (a list of
      words), but in NetLogo you must write <tt>&quot;see spot
      run&quot;</tt> (a string) or <tt>[&quot;see&quot; &quot;spot&quot;
      &quot;run&quot;]</tt> (a list of strings) instead.
      <li>NetLogo's <a href="dictionary.html#run"><tt>run</tt></a>
      command works on tasks and strings, not lists (since we have no
      &quot;word&quot; data type), and does not permit the definition or
      redefinition of procedures.
      <li>Control structures such as <a href=
      "dictionary.html#if"><tt>if</tt></a> and <a href=
      "dictionary.html#while"><tt>while</tt></a> are special forms, not
      ordinary functions. You can't define your own special forms, so
      you can't define your own control structures. (You can do
      something similar using tasks, but you must use the <tt>task</tt>,
      <tt>run</tt>, and <tt>runresult</tt> primitives for that, you cannot
      make them implicit.)
      <li>Tasks (aka function values or lambda) are true lexically-scoped
      closures. This feature is available in NetLogo and in modern Lisps,
      but not in standard Logo.
      </ul>
    <p>
      Of course, the NetLogo language also contains other features not
      found in most Logos, most importantly agents and agentsets.

